--- 
title: "İstatistiksel Kalite Kontrol"
author: "Dr. Busenur Kızılaslan"
date: "`r Sys.Date()`"
output: pdf_document
documentclass: book
bibliography:
- book.bib
- packages.bib
biblio-style: apalike
link-citations: yes
description: Statistical quality control lecture notes
site: bookdown::bookdown_site
---

# Ön Bilgi

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/dreamb.png" style="float: right;" width="300" height="300" title="Dream Big" /> 

Ders notları temelde _IST3032 İstatistiksel Kalite Kontrol_ dersine kaynaklık etmesi amacıyla tasarlanmış olup konu çerçevesinde kendini geliştirmek isteyen herkesin faydalanabilmesi hedeflenmiştir.

Ders dili Türkçe'dir. Bu bakımdan genel anlatımda Türkçe kullanılacaktır. Literatürü rahat takip edebilmeniz ve terim karmaşası yaşamamanız adına temel terim kısaltmaları orijinal haliyle kullanılacaktır (Kısaltmalar bölümünde hem Türkçe hem İngilizce açılımları bulabilirsiniz). Referans verilen kaynaklardan faydalanabilmeniz ve ders sürecinde incelemeniz gereken makalelerde zorluk yaşamamanız adına İngilizce eksikliğinizi gidermeniz önerilir. 

Ders uygulamaları R programlama dili ile gerçekleştirilecek olup ödev uygulamalarınızı bu programlama dili ile hazırlamanız istenecektir, bu sebeple _Bilgisayar III_ ve _Bilgisayar IV_ ders notlarınızı gözden geçirmeniz faydalı olacaktır.

Ders notunuz bookdown^[https://bookdown.org] ile hazırlanmış olup [linkten](https://busenurk.github.io/quality-control/_book/index.html) ulaşabilirsiniz. Ders notlarınızın pdf halini bookdown üzerinden indirebilirsiniz veya UZEM ders notları kısmından ulaşabilirsiniz.

<br>

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/bookdown.png" style="float: center;" width="800" height="400" title="Bookdown" /> 

<br>

**Kaynaklar**

- [Introduction to Statistical Quality Control - Douglas C. Montgomery](http://endustri.eskisehir.edu.tr/ipoyraz/TKY302/icerik/text%20book_montgomery_6th%20edition.pdf) 

- [Statistical Process Control - John S. Oakland](http://www.diliev.com/Home/materiali/KHEA/referati/6812268-Statistical-Process-Control-eBook-VG.pdf)

- İstatistiksel Kalite Kontrol Ders Notları - Erhan Öner

- [İstatistiksel Kalite Kontrol Ders Notları - Tuncay Özcan](http://auzefkitap.istanbul.edu.tr/kitap/endustrimuhlt_ue/istatistikselkalitekontrolu.pdf)

## Hakkımda

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/busenur1.jpg" style="float: right;" width="270" height="350" title="Busenur" /> 

2012 yılında Mimar Sinan G. S. Üniversitesi istatistik bölümünde lisans öğrenimimi tamamlamamın ardından 2014 yılı itibariyle Marmara Üniversitesi istatistik bölümünde araştırma görevlisi olarak göreve başladım. Eş zamanlı olarak başladığım yüksek lisans öğrenimimi yine Mimar Sinan G. S. Üniversitesi istatistik anabilim dalında tamamlarken artık çalışma alanım bulanık mantık ([fuzzy logic](https://en.wikipedia.org/wiki/Fuzzy_logic)) olarak şekillenmişti. Bir buçuk yılda tamamladığım yüksek lisansın ardından farklı bakış açısı kazanma fikriyle yönümü Yıldız Teknik Üniversitesi'ne çevirdim. 2015 yılında istatistik bölümünde başladığım doktora öğrenimimi 2020 yılında yine bulanık mantık ile öngörü üzerine hazırladığım tezim ile tamamladım. Doktora öğrenimim sırasında İstanbul Teknik Üniversitesi endüstri mühendisliği bölümünden de çeşitli dersler alarak alanında uzman hocaların^[[Prof. Dr. Cengiz Kahraman](http://akademi.itu.edu.tr/kahramanc/)] bilgilerinden faydalanma imkanı buldum. 

Akademik kariyer hedefiyle başlamadığım öğrenim yaşamımda ufku açık, aydınlık ve birikimli hocalarım yolumu bulmama yardımcı olmuştur. 2018 yılında Polonya'da gerçekleşen [International Conference on Trends and Perspectives in Linear Statistical Inference (LinStat'2018)](http://www.linstat2018.put.poznan.pl/ysa.html) kapsamında sunduğum, doktora tezimin bir kısmından oluşan çalışma ile aldığım Young Scientists Awards ikincilik ödülü de yanlış yolda olmadığımı göstermiştir. 

Üzerimde emeği olan herkese teşekkürlerimle!

<br>

[**CV**](https://avesis.marmara.edu.tr/busenur.sarica), [**Google Scholar**](https://scholar.google.com.tr/citations?user=OKlYJEgAAAAJ&hl=tr), [**Linkedin**](https://www.linkedin.com/in/busenur-kızılaslan-795ab54a)





<!--chapter:end:index.Rmd-->

---
output:
  pdf_document: default
  html_document: default
---
# Motivasyon

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/dprize.png" style="float: right;" width="250" height="250" title="Deming Prize" /> 

Kaliteyi kontrol etmek ve iyileştirmek rekabet ortamında kazananı belirleyen faktör haline gelmiştir. Bu bakımdan doğru yürütülen bir kalite kontrol süreci başarının anahtarı olacaktır. Sürecin başarılı yürütülmesi ise ancak alanında uzman kişilerin önderliğinde mümkündür. 

İstatistikçiler için olası bir çalışma alanı olan _İstatistiksel Kalite Kontrol_, gelecekte sizlerden biri veya birilerinin de yöneleceği alan olabilir. Bu bakımdan ders kapsamındaki bilgileri özümsemek, uygulamaları kavramak önem arz etmektedir. 

<br>


Dr. W. Edwards Deming tarafından yazılmış, incelenmesi gereken makaleler;

[On the statistician's contribution to quality](https://deming.org/wp-content/uploads/2020/06/On-The-Statisticians-Contribution-to-Quality-1987.pdf)

[Some responsibilities of the statistician](https://deming.org/wp-content/uploads/2020/06/Some-Responsibilities-of-a-Statistician-1964.pdf)

<!--chapter:end:01-Motivasyon.Rmd-->

# Ders Planı

**Öğretim elemanı:** Arş. Gör. Dr. Busenur KIZILASLAN

**e-posta:** busenur.sarica@marmara.edu.tr

**Ders saati ve şekli:** Pzts 15:00-17:00, Cmts 11:00-13:00, UZEM

**Ders amacı:** İstatistiksel Kalite Kontrol tarihçesi, yöntemler ve işleyiş hakkında bilgi sahibi olmak, R uygulamaları ile güncel hayat uygulamaları gerçekleştirmek

<br>

**Kaynaklar:** 

- [Introduction to Statistical Quality Control - Douglas C. Montgomery](http://endustri.eskisehir.edu.tr/ipoyraz/TKY302/icerik/text%20book_montgomery_6th%20edition.pdf) 

- [Statistical Process Control - John S. Oakland](http://www.diliev.com/Home/materiali/KHEA/referati/6812268-Statistical-Process-Control-eBook-VG.pdf)

- İstatistiksel Kalite Kontrol Ders Notları - Erhan Öner

- [İstatistiksel Kalite Kontrol Ders Notları - Tuncay Özcan](http://auzefkitap.istanbul.edu.tr/kitap/endustrimuhlt_ue/istatistikselkalitekontrolu.pdf)

<br>

**Ders Planı:** 

- Terminoloji ve genel bakış

- Kalite öncüleri

- Çıkarımsal istatistik

- Kontrol grafikleri
  - Ölçülebilir değişkenler için kontrol diyagramları
  - Ölçülemeyen özellikler için kontrol diyagramları
  
- Proses yeterlilik analizi, CUSUM ve EWMA diyagramları

- Kabul örneklemesi

- R uygulamaları _(Uygulamalar her konu içeriğinde yer alacaktır.)_


<!--chapter:end:02-Genel-Bakış.Rmd-->

# Kalite Yönetimi Temel Kavramları

## Kalite Kavramı

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/quality1.jpg" style="float: right;" width="400" height="260" title="Quality" /> 

Kalite tanımı birçok farklı şekilde yapılabilir. Kalitenin sözlük anlamı _mükemmeliyet derecesi_ olmakla birlikte, ürün/hizmette mevcut olması istenen özellik veya özellikler, kalite tanımı için başlangıç noktası olarak seçilebilir. Kalitenin çok boyutlu ve doğası gereği göreceli yapısı ortak bir tanımdan ziyade farklı bakış açılarıyla geliştirilmiş kalite tanımlarını ortaya çıkarmıştır. Amerikan Kalite Derneği (ASQ); kaliteyi farklı tanımlamaların yapılabileceği öznel bir terim olarak tanımlamıştır. 

- Kalite, gereksinimlere uygunluktur. (Crosby)
- Kalite, kullanıma uygunluktur. (Juran)
- Kalite, müşterinin şimdiki ve gelecekteki ihtiyaçlarını hedeflemektir. (Deming)
- Kalite, müşteri beklentilerini karşılayacak ürün ve hizmetin pazarlama, mühendislik, imalat ve bakım aşamalarındaki karakteristiklerinin toplamıdır. (Feigenbaum)
- Kalite, özellikleri ve gereksinimleri yerine getirme derecesidir. (ISO 9000)
- Kalite, mal ve hizmetlerde, özellikle gereksinimlere uydukları ve müşterileri tatmin ettikleri ölçüde mükemmelliği ifade eder. (ASQ)

Kalite **değişkenlikle (variability)** ters orantılıdır. Ürün/hizmetin önemli karakteristiklerindeki değişkenliğin azaltılması kaliteyi arttıracaktır. 

Değişkenliğin kalite kontrol açısından önemini kavramak açısından bir örnek verelim. Amerika Birleşik Devletleri'ndeki bir otomobil şirketi, şanzıman üretimlerini hem yerli bir tesiste hem de Japon bir tedarikçi aracılığıyla gerçekleştirmektedir. 


Garanti taleplerinin ve onarım maliyetlerinin analizi, sütun grafikte gösterilmiştir, Japon üretimi şanzımanın çok daha düşük maliyetlere sahip olmasıyla, iki üretim kaynağı arasında çarpıcı bir fark olduğu görülmektedir. Maliyet ve performanstaki bu farkın nedenini keşfetme çalışmasının bir parçası olarak, şirket her tesisten rastgele örnekler seçmiş, bunları parçalara ayırmış ve birkaç kritik kalite özelliğini ölçmüştür.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/target1.png" style="float: right;" width="350" height="220" title="Şekil1" /> 



Kritik boyutların her iki dağılımı da hedef değerde ortalanmıştır. Bununla birlikte, Amerika Birleşik Devletleri'nde üretilen şanzımanlar için kritik özelliklerin dağılımı, spesifikasyonların genişliğinin yaklaşık% 75'ini kaplar ve bu da çok az sayıda uygun olmayan birimin üretileceğini gösterir. Aslında tesis, şirket içinde genel kabul görmüş kalite anlayışına göre oldukça iyi bir kalite seviyesinde üretim yapmaktadır. Buna karşılık, Japon fabrikası aynı kritik özelliklerin spesifikasyon bandının sadece yaklaşık% 25'ini kapladığı aktarımlar üretmiştir. Sonuç olarak, Japon yapımı şanzımanların kritik kalite özelliklerinde Amerika Birleşik Devletleri'nde üretilenlere kıyasla önemli ölçüde daha az değişkenlik mevcuttur.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/target.png" style="float: right;" width="350" height="220" title="Şekil2" />


Akla gelen ilk soru Japonlar bunu nasıl yaptı? Burada azalan değişkenlik, doğrudan daha düşük maliyetlere dönüşmüştür. Dahası, Japon yapımı şanzımanlar daha sorunsuz vites değiştirmiş, daha sessiz çalışmış ve genellikle müşteri tarafından yurt içinde üretilenlerden daha üstün olarak algılanmıştır. Daha az onarım ve garanti talebi, daha az yeniden çalışma ve boşa harcanan zaman, çaba ve paranın azaltılması anlamına gelmektedir. Dolayısıyla, **kalite gerçekten değişkenlikle ters orantılıdır.** Dahası maliyetle yakından ilişkilidir.

Japonlar bunu nasıl yaptı? Cevap, kalite kontrolün sistematik ve etkili kullanımında yatmaktadır.



Kalite, rakip ürün/hizmetlerin seçiminde en önemli tüketici karar faktörlerinden biri haline gelmiştir. Bu görüş, tüketicinin bir birey, bir endüstriyel kuruluş, bir perakende mağazası, bir banka veya finans kurumu veya bir askeri savunma programı olmasına bakılmaksızın yaygındır. Sonuç olarak, kaliteyi anlamak ve iyileştirmek, iş başarısı, büyüme ve rekabet gücü açısından önemlidir. Bu bakımdan kalitenin iyileştirilmesi ve genel iş stratejisinin ayrılmaz bir parçası haline getirilmesi başarının temel gereklerindendir.

`Kalite terminolojisinde ürün (product) hem ürün hem de hizmet anlamında kullanılmaktdır.`

**Kalite iyileştirme (quality improvement):** Proses ve ürünler açısından değişkenliğin azaltılması olarak tanımlanmaktadır. Fazla miktarda değişkenlik performansta kayıba (waste) neden olmaktadır, para kaybı, zaman kaybı veya enerji kaybı örnek olarak verilebilir. Kalite iyileştirmenin bir diğer tanımı da _kaybın azaltılması (reduction of waste)_ olarak yapılabilir.

## Kalite Boyutları
Kalitenin çok boyutlu yapısı farklı kalite tanımlarının ortaya çıkmasına neden olmuştur. Garvin (1987), kalitenin sekiz boyutunu şöyle tanımlamaktadır. 


**1. Performans:** Temel ürün özellikleri

**2. Güvenilirlik:** Kullanım ömrü içerisindeki performans tutarlılığı

**3. Dayanıklılık:** Yararlı kullanım ömrü

**4. Hizmet:** Kullanım ömrü içerisinde problem ve şikayetlerin çözümü

**5. Estetik:** Duyulara seslenebilme özelliği

**6. Özellikler:** Öne çıkmayı sağlayan ikincil karakteristikler

**7. İtibar:** Geçmiş performans ve algılanan kalite

**8. Uygunluk:** Endüstri standartlarına uygunluk

<br>

```
Kalite çalışmalarında tüm boyutlar dikkate alınmalıdır.
```

## Kalite Mühendislik Terminolojisi

Her ürün, kullanıcının veya tüketicinin kalite göstergesi olarak tanımladığı bir takım unsurlara sahiptir. Bu unsurlara genellikle kalite karakteristikleri denir. Aynı zamanda kalite için kritik (critical to quality (CTQ)) karakteristikler olarak da tanımlanmaktadır. Kalite karakteristikleri birkaç türde olabilir:

- **Fiziksel:** uzunluk, ağırlık, voltaj, viskozite

- **Duyusal:** tat, görünüş, renk

- **Zamansal:** güvenilirlik, dayanıklılık, hizmet

Kalite karakteristikleri doğrudan ya da dolaylı olarak kalite boyutlarını etkilemektedir.

**Kalite mühendisliği**, bir şirketin bir ürünün kalite özelliklerinin gerekli seviyelerde olmasını ve bu istenen seviyeler etrafındaki değişkenliğin minimum olmasını sağlamak için kullandığı operasyonel, yönetimsel ve mühendislik faaliyetleridir.

Çoğu kuruluş, müşteriye her zaman aynı olan veya müşteri beklentilerini karşılayan seviyelerde kalite karakteristiklerine sahip ürünler sağlamayı zor (ve pahalı) bulur. Bunun başlıca nedeni **değişkenliktir**. Her üründe belli bir miktar değişkenlik vardır; sonuç olarak, iki ürün hiçbir zaman özdeş değildir. Örneğin, bir jet türbin motoru pervanesi üzerindeki kanatların kalınlığı, aynı pervane üzerinde bile aynı değildir. Kanat kalınlığı da pervaneler arasında farklılık gösterecektir. Bıçak kalınlığındaki bu değişiklik küçükse, müşteri üzerinde hiçbir etkisi olmayabilir. Ancak, varyasyon büyükse, müşteri üniteyi istenmeyen ve kabul edilemez olarak algılayabilir. Bu değişkenliğin kaynakları, malzemelerdeki farklılıkları, üretim ekipmanının performans ve işletimindeki farklılıkları ve operatörlerin görevlerini yerine getirme biçimlerindeki farklılıkları içerir. Kalite iyileştirme bu noktada önemli yere sahiptir.

Değişkenlik yalnızca istatistiksel terimlerle tanımlanabildiğinden, **istatistiksel yöntemler** kalite iyileştirme çabalarında merkezi bir rol oynar. İstatistiksel yöntemlerin kalite mühendisliğine uygulanmasında, kalite karakteristiklerine ilişkin veriler **niceliksel (variables)** veya **niteliksel (attributes)** veriler olarak sınıflandırılmaktadır.

Kalite özellikleri genellikle spesifikasyonlara göre değerlendirilir. Üretilen bir ürün için **spesifikasyonlar (specifications)**, ürünün alt parçaları ve nihai ürünün kalite özellikleri için istenen değerlerdir. Örneğin, bir otomobil şanzımanında kullanılan bir şaftın çapı çok büyük veya çok küçük olamaz, gerekli boyutta olmalıdır, aksi taktirde arızaya neden olacaktır. 

Kalite karakteristikleri için istenen değer **nominal** veya **hedef değer (target value)** olarak tanımlanmaktadır. Bu hedef değerler genellikle bir aralıkla sınırlandırılır, bu yapıda en büyük değer; **üst sınır (upper specification limit (USL))** ve en küçük değer; **alt sınır (lower specification limit (LSL))** olarak adlandırılır. Bazı kalite karakteristiklerinin spesifikasyon limitleri tek taraflı olabilir. Spesifikasyon sınırları genellikle tasarım mühendisleri tarafından belirlenir.

## Toplam Kalite Yönetiminin Tarihsel Gelişimi

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/timeline.png" style="float: center;" width="1000" height="600" title="timeline" />


Önemli zaman dilimlerinin detaylandırıldığı tarihsel gelişimi temel aşamaları ile altı ana başlık altında toplamak mümkündür.

**1.** Operatör kalite kontrolü

**2.** Ustabaşı kalite kontrolü

**3.** Muayene ile kalite kontrol

**4.** İstatistiksel kalite kontrol

**5.** Toplam kalite kontrol

**6.** Toplam kalite yönetimi


Rekabetçi ortamda çağdaş kalite politikası oluşturulması ve geliştirilmesi önem arz etmektedir, müşteri fiyat-kalite ikileminde tercih yapmak durumunda bırakılmamalıdır. 

## Kalite Kontrol ve İyileştirme için İstatistiksel Yöntemler

- **İstatistiksel proses kontrol (SPC):** Proses kısaca girdiler ve çıktıdan oluşan bir sistem olarak tanımlanabilir. Kontrol diyagramları istatistiksel proses kontrol için temel yöntemlerden biridir.

- **Deney tasarımı:**  İstatistiksel olarak tasarlanmış deneyler, kalite karakteristiklerindeki değişkenliği azaltmada ve proses performansını optimize eden kontrol edilebilir değişkenlerin seviyelerini belirlemede oldukça önemlidir. Genellikle proses performansı ve ürün kalitesindeki önemli gelişmeler de tasarlanmış deneylerin kullanılmasından kaynaklanır.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/kabulorn.png" style="float: right;" width="400" height="250" title="Kabul Örneklemesi" />

- **Kabul örneklemesi:** Kalite kontrolünün en eski yönlerinden biridir ve kalite iyileştirme için istatistiksel metodolojinin geliştirilmesinden çok öncesine dayanmaktadır. Örnekleme çeşitli aşamalarda gerçekleştirilebilir. Modern kalite güvence sistemleri genellikle kabul örneklemesine daha az vurgu yapmakta, istatistiksel proses kontrol ve deney tasarımına odaklanmaktadır. Kabul örneklemesi, kalitenin spesifikasyona uygunluk görüşünü pekiştirme eğilimindedir. 

Kalite mühendisliği çabalarının temel amacı, ürünün temel kalite özelliklerindeki değişkenliğin sistematik olarak azaltılmasıdır. 

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/percentapp.png" style="float: center;" width="300" height="300" title="" /> <img src="/Users/busenursarica/Documents/GitHub/quality-control/images/3d.png" style="float: center;" width="450" height="300" title="" />

## Kalite İyileştirmede Yönetim Cephesi

SPC ve deney tasarımı dahil istatistiksel teknikler ve diğer problem çözme araçları kalite kontrol ve iyileştirmenin teknik temelini oluşturur. Ancak, en etkin kullanım, bu tekniklerin kalite iyileştirmeye odaklanan bir yönetim sistemi içinde uygulanmasıyla mümkündür. Bir kuruluşun yönetim sistemi, genel kalite iyileştirme felsefesini doğru bir şekilde yönlendirmek ve işletmenin tüm yönlerine yayılmasını sağlamak için organize edilmelidir. Kalitenin etkin yönetimi için üç faaliyetin başarılı bir şekilde yürütülmesi gerekir: kalite planlama, kalite güvencesi ve kalite kontrolü ve iyileştirme.

**Kalite planlama:** Kalite planlama stratejik bir faaliyettir ve bir kuruluşun uzun vadeli iş başarısı için ürün geliştirme planı, finansal plan, pazarlama planı ve insan kaynaklarının kullanımına yönelik planlar kadar önemlidir. Stratejik bir kalite planı olmadan, hatalı tasarımlar, üretim hataları, saha arızaları ve müşteri şikayetleri oluşacak ve muazzam miktarda zaman, para ve çaba boşa harcanacaktır. Kalite planlaması, müşterilerin tanımlanmasını ve ihtiyaçlarını tanımlamayı içerir (buna bazen müşterinin sesini dinleme (voice of the customer (VOC)) denir). Daha sonra müşteri beklentilerini karşılayan veya aşan ürün veya hizmetler geliştirilmelidir. Kalitenin sekiz boyutu bu çabanın önemli bir parçasıdır. Kuruluş daha sonra bu ürün ve hizmetlerin nasıl gerçekleştirileceğini belirlemelidir. Belirli, sistematik bir temelde kalite iyileştirme planlaması da bu sürecin önemli bir parçasıdır.

**Kalite güvencesi:** Ürün ve hizmetlerin kalite seviyelerinin uygun şekilde sürdürülmesini ve tedarikçi ve müşteri kalite sorunlarının uygun şekilde çözülmesini sağlayan faaliyetler bütünüdür.

**Kalite kontrol ve iyileştirme:** Kalite kontrol ve iyileştirme, ürün ve hizmetlerin gereksinimleri karşılamasını ve sürekli olarak iyileştirilmesini sağlamak için kullanılan faaliyetler dizisini içerir. Değişkenlik genellikle düşük kalitenin ana kaynağı olduğundan, SPC ve deney tasarımı dahil istatistiksel teknikler, kalite kontrol ve iyileştirmenin ana araçlarıdır. Kalite iyileştirme genellikle proje bazında yapılır ve istatistiksel yöntemlerle ilgili özel bilgiye ve bunların uygulanmasında deneyime sahip personel tarafından yönetilen ekipleri içerir.

## Kalite Yönetimi Liderleri

Kaliteyi iyileştirmenin istatistiksel metodolojisine birçok kişi katkıda bulunmuştur ancak uygulama ve yönetim felsefesi açısından önemli katkıları bulunan bilim insanları üzerinde durulacaktır. 

- Walter Shewhart
- W. E. Deming
- J. M. Juran 
- A. V. Feigenbaum
- Philip Crosby
- Kaoru Ishikawa
- Genichi Taguchi

### Walter Shewhart

Walter Andrew Shewhart Amerikalı bir fizikçi, mühendis ve istatistikçidir. İstatistiksel kalite kontrolün babası olarak bilinir. Kontrol diyagramlarını ilk olarak kullanan kişidir. Kontrol diyagramlarının kullanımı genellikle istatistiksel kalite kontrolün resmi başlangıcı olarak kabul edilmektedir. 

### W. Edwards Deming

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/Deming.jpeg" style="float: right;" width="230" height="300" title="Deming" />

W. Edwards Deming, Wyoming Üniversitesi ve Yale Üniversitesi'nde mühendislik ve fizik eğitimi almıştır. Western Electric için çalışmış ve kontrol şemasının (control charts) geliştiricisi Walter A. Shewhart'tan büyük ölçüde etkilenmiştir.

İkinci Dünya Savaşı ardından, Japon endüstrilerine danışmanlık görevinde bulunmuş, istatistiksel yöntemlerin gücü ve kalitenin rekabetçi bir silah olarak kullanımı konularında yöneticilerini ikna etmiştir.İstatistiksel yöntemlere olan bu bağlılık ve kullanım, Japonya endüstrisinin ve ekonomisinin genişlemesinde kilit bir unsur olmuştur. 

Japon Bilim Adamları ve Mühendisler Birliği, onuruna kalite iyileştirme için Deming Ödülü'nü yaratmıştır.

Deming, Shewhart'ın bilimsel çıkarımları etrafında bazı metodolojik önerilerini geliştirdi ve sentezini Shewhart döngüsü (Shewhart (PDCA) cycle) olarak adlandırdı. PDCA döngüsü tüm proseslere uygulanabilir. Döngü iteratif olup karmaşık problemler için çok sayıda döngü gerekebilir.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/sh.cyc.png" style="float: left;" width="270" height="270" title="Deming" />

**(P) Planla:** Müşteri talebi ve kuruluş politikasına uyumlu sonuçların elde edilebilmesi için gereken objektif hedef ve proseslerin tasarlanması

**(D) Uygula:** Proseslerin uygulanması

**(C) Kontrol et:** Proseslerin ve ürünün belirlenen politika, şart ve hedeflere uygunluğunun incelenmesi ve raporlanması

**(A) Önlem al:** Performansın iyileştirilmesi için gereken önlemlerin alınması 

<br>

**Kalite yönetimi için 14 ilke belirlemiştir;**
 
 1. Ürün/hizmetlerin iyileştirilmesine odaklanan bir amaç sürekliliği yaratın
 
 2. Yeni felsefeyi benimseyin
 
 3. Muayene kavramını anlayın.
 
 4. Fiyat bazlı olmayan, performans odaklı uzun dönemli bağlantı hedefleyin.
 
 5. İstatistiksel yöntemlerden yararlanarak sürekli iyileştirmeye odaklanın.
 
 6. Eğitime önem verin ve modern eğitim yöntemlerini takip edin.
 
 7. Liderliği geliştirin.
 
 8. Korkuyu ortadan kaldırın.
 
 9. Engelleri kaldırın, ekip çalışmasına teşvik edin.
 
 10. Çalışanlara yönelik ikazları ortadan kaldırın.
 
 11. Sayısal kotaları ve çalışma standartlarını ortadan kaldırın, gelişimi hedefleyin.
 
 12. Çalışanları çalışanları dinleyin ve engelleri kaldırın.
 
 13. Çalışanların gelişimini önemseyin ve destekleyin.
 
 14. Sürekli iyileştirmeyi ortak hedef haline getirin. 
 
 <br>
 
Belirtilen 14 Madde'yi Deming'den dinlemek de mümkün; [The 14 Points](https://www.youtube.com/watch?v=tsF-8u-V4j4)
 
Deming’in 14 maddesini okurken, organizasyonel değişime güçlü bir vurgu yapıldığı fark edilmaktedir. Ayrıca, bu değişim sürecine rehberlik etmede yönetimin rolü büyük önem taşımaktadır. Ancak nelerin değişmesi gerekiyor ve bu değişim süreci nasıl başlatılmalı? Bu noktada istatistiksel yöntemler devreye girmektedir. 

<span style="color: red;">Deming'in tanımladığı yönetimdeki 7 ölümcül hastalık nedir araştırınız.</span>


### Joseph M. Juran

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/Juran.jpg" style="float: right;" width="200" height="270" title="Juran" />

Joseph M. Juran Minnesota Üniversitesi Elektrik Mühendisliği Bölümü’nden mezun olmuştur. William Edwards Deming gibi o da gerek ABD’de gerek Japonya’da toplam kalite yönetiminin yaygınlaşmasında çok önemli rol oynamıştır. 1981 yılında Japon İmparatoru, Hirohito tarafından Order of Sacred Treasure ile ödüllendirilmiştir.

Juran, toplam kalite yönetimi alanında çok önemli eserler yayınlamıştır. Juran’ın Kalite Kontrol El Kitabı (Juran’s Quality Control Handbook) adlı çalışması toplam kalite yönetimi alanında klasik ve en önemli eserlerden birisi olarak kabul edilmektedir. 

Kalite yönetimi için planlama, kontrol ve iyileştirme adımlarından oluşan **Juran üçlemesini (Juran Trilogy)** geliştirmiştir.

**Juran üçlemesi (Juran Trilogy)** 

  - **Planlama:** Harici müşterilerin tanımlanması ve ihtiyaçların belirlenmesi, düzenli kalite iyileştirme planlaması

  - **Kontrol:** Ürünün veya hizmetin gereksinimleri karşıladığından emin olmak için işletmenin işletme güçleri tarafından incelenmesi. SPC, kontrolün birincil araçlarından biridir.

  - **İyileştirme:** Mevcut seviyeden daha yüksek performans ve kalite seviyelerine ulaşma hedefi. Juran, iyileştirmenin proje bazında olması gerektiğini vurgulamaktadır. Bu projeler tipik olarak üçlemenin planlama aşamasında belirlenmelidir.


### Armand V. Feigenbaum

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/Feigenbaum.png" style="float: right;" width="200" height="210" title="Feigenbaum" />

Armand V. Feigenbaum, Lisans eğitimini Union College'de, Yüksek Lisans ve Doktora Eğitimini ise MIT (Massachusetts Institute of Technology)'de tamamlamıştır. 1961 – 1963 yılları arasında Amerikan Kalite Topluluğu'na (American Society for Quality) başkanlık etmiştir. 

Daha sonra Toplam Kalite Yönetimi olarak anılacak Toplam Kalite Kontrol kavramının yaratıcısıdır. Şirket çapında kalite kontrol kavramını ilk kez kitabı Toplam Kalite Kontrolü'nde tanıtmıştır. Bu kitap, 1950'lerin başlarında Japonya'daki erken kalite yönetimi felsefesinin etkilemiştir. Birçok Japon şirketi "toplam kalite kontrol" terimini kullanmıştır. Kaliteyi iyileştirmek için üç aşamalı bir yaklaşım önermiştir: kalite liderliği, kalite teknolojisi ve örgütsel bağlılık.

***

Deming, Juran ve Feigenbaum bu öncülerin üçü de 

- kalitenin temel bir rekabet silahı olarak önemini, 
- kalite iyileştirmenin uygulanmasında yönetimin oynaması gereken önemli rolü 
- organizasyonun “kalite dönüşümünde” istatistiksel yöntem ve tekniklerin önemini 

vurgulamaktadır.

***

### Philip Crosby

Philip B. Crosby, kalite uzmanıdır ve `sıfır hata görüşü` ile tanınmaktadır. Crosby’ye göre kalite, yerine göre kullanımdır ve gereksiz kullanım maliyetiyle değerlendirilir. Crosby kalitenin yaklaşımını mutlak 4 esas ile açıklamıştır;

- Kalite mükemmellik olarak değil gereksinimlere uygunluk olarak tanımlanır.

- Kalite değerleme ile değil önleme ile başarılır.

- Standart performans sıfır hatadır.

- Kalite maliyet ile ölçülür.

### Kaoru Ishikawa

Kaoru Ishikawa, Japonya'da toplam kalite yönetimine katkıda bulunan liderlerin başında gelmektedir. İkinci dünya savaşı sonrasında ABD'de Deming ve Juran ile tanışmıştır. Ishikawa, kalite kontrol alanındaki çalışmaları ile Japonya'da kalite bilincinin yaygınlaşmasında önemli rol oynamıştır. 


### Genichi Taguchi

Genichi Taguchi, mühendis ve istatistikçidir. Varyasyonun azaltılması ve performans sürekliliğine odaklanmıştır. Ayrıca Taguchi tarafından önerilen kalite kayıp fonksiyonu kalite yönetim literatüründe önemli yere sahiptir.


## Toplam Kalite Yönetimi

Toplam Kalite Yönetimi (TQM), organizasyon temelinde kalite iyileştirme aktivitelerinin uygulanması ve yönetilmesini kapsayan bir stratejidir.

Geleneksel yönetim yaklaşımına odaklanan işletmelerde gelişme **reaktif** tarzdadır. Bu yapıda müşteri şikayeti durumunda hatanın düzeltilmesi, tekrar üretim ve satış döngüsü gerçekleşir. Hataları düzeltme yerine önleme yaklaşımını içeren **proaktif** gelişme modeli ise toplam kalite yönetiminin temelini oluşturmaktadır. Hatalar oluşmadan ve müşteriye ulaşmadan önleme hedefindedir.

Tüketici isteklerini en ekonomik şekilde karşılamak hedefiyle işletme organizasyonu içerisindeki çeşitli birimlerin; kalitenin yaratılması, yaşatılması ve geliştirilmesi yolundaki çabalarını bir araya getirip düzenlenmesini sağlayan etkili sistem **toplam kalite kontrol** olarak tanımlanır.

## Kalite Sistemleri ve Standartları

[ISO](https://www.iso.org/home.html) (International Organization for Standardization), Uluslararası Standartlar Teşkilâtı, Uluslararası Elektroteknik Komisyonu'nun çalışma sahasına giren elektrik ve elektronik mühendisliği konuları dışında, bütün teknik ve teknik dışı dallardaki standartların belirlenmesi çalışmalarını yürütmek amacıyla 1947 yılında Cenevre'de kurulmuştur.

Uluslararası Standartlar Teşkilâtına [üye ülkelerin](https://www.iso.org/members.html) sayısı 165'dir. 

Teknolojik ihtiyaçlardan dolayı ISO standartları, her beş yılda bir gözden geçirilir ve gerekli değişiklikler yapılır.

Çoğu zaman ISO standard kodlarıyla ISO kalite belgesi anlamsal olarak karıştırılmakta ve anlam karmaşasına neden olabilmektedir. Uluslararası standartlar organizasyonu ISO 9001 ve ISO 14001 gibi Uluslararası Standartları geliştirmekte, ancak belgelendirme yapmamakta ve ISO kalite belgesi vermemektedir. Belgelendirme işlemleri, akredite belgelendirme kuruluşları tarafından gerçekleştirilmektedir.

ISO kısaltmasının yanında yer alan rakam standardın kodu ve sondaki yıl bilgisi içeren diğer rakamsa, ilgili standardın son revizyonuna ait yılı göstermektedir. Örnek: ISO 9001:2015, ISO 22000:2016 vb.



<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/env.png" style="float: center;" width="370" height="150" title="environment" /> <img src="/Users/busenursarica/Documents/GitHub/quality-control/images/health.png" style="float: center;" width="370" height="150" title="health" />

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/food.png" style="float: center;" width="370" height="150" title="food" /> <img src="/Users/busenursarica/Documents/GitHub/quality-control/images/energy.png" style="float: center;" width="370" height="150" title="energy" />

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/security.png" style="float: center;" width="370" height="150" title="security" /> <img src="/Users/busenursarica/Documents/GitHub/quality-control/images/quality.png" style="float: center;" width="370" height="150" title="quality" />

## ISO 9000 Kalite Standartları

ISO 9000 Kalite Sistem Standartları Mart 1987’de yayınlanmış ve birçok ülke tarafından benimsenerek uygulamaya geçilmiştir. ISO 9000 İmalat ve Hizmet endüstrilerinde kalite güvencesi için kurulmuş, kapsamlı bir standartlar kümesidir. ISO 9000 serileri, bir firmanın kalite sistemini geliştirmesini, belgelemesini ve çalıştırılmasını ister, yani firma içinde yönetiminin kalite tetkik uygulamaları için sahip olduğu sorumluluktan, satın alma politikalarından, eğitime kadar uzanan Kalite yönetim sistemleri uygulamalarının tümünü kapsar. 

170'den fazla ülkede ISO 9001 sertifikalı bir milyonun üzerinde şirket ve kuruluş bulunmaktadır.

**Standardın Amacı**

- Kalite yönetimi için genel bir çerçeve sağlaması,
- Kuruluşlar arasında güven ortamı yaratması,
- Proseslerin yönetilmesiyle ürün/hizmet kalitesinin sağlanması, devam ettirilmesi ve iyileştirilmesi,
- Müşteriye ürün ve hizmetlerin tutarlılığının güveninin verilmesidir.

**Sağladığı yararlar**

- Çalışanların kalite bilincinde artış sağlanması
- İşletmenin piyasa itibarında artış sağlanması (prestij)
- Pazarlama faaliyetlerinde rakiplerden farklılık sağlanması
- İşletmenin uluslararası geçerliliğe sahip bir kalite belgesi edinmesinin getirdiği ticari avantajlardan yararlanabilme (ihracat için kalitenin belge ile ispatlanabilmesi)
- Müşteri memnuniyetinde ve müşteri sadakatinde artış sağlanması
- Hata oranlarında, firelerde, yeniden işlemelerde azalma sağlanması
- Girdi, üretim ve son kontrollerin etkin olarak yapılabilmesi
- Tedarikçilerin seçiminde, değerlendirilmesinde ve takibinde kolaylık sağlanması
- İşletme içi yetki ve sorumlulukların tespitinde ve dağıtılmasında kolaylık sağlanması
- İşletme faaliyetlerinin standartlaştırılmasını sağlayacak dokümantasyonun (alt yapının) oluşturulması
- Geçmişe yönelik kayıtların düzenli bir şekilde tutulmasını sağlayacak altyapının oluşturulması
- Veriler ve istatistiksel ölçümler doğrultusunda durum analizlerinin yapılabilmesi ve geleceğe yönelik kararlarda bu analiz sonuçlarının kullanılabilmesi
- Kurumsallaşma yolunda önemli bir adım atılmış olması
 
**ISO 9000 Belgesi almak yeterli mi?** 

ISO 9000 uygulama sürecinde yapılabilecek en önemli yanlışlık belgenin alınması ile bu sürecin sona erdiğini düşünmektir. ISO 9000 Kalite Sistem Belgesi yeter mi? sorusuna verilecek yanıt hayırdır. Çünkü IS0 9000 uygulama süreci kuruluşun kalite yönetim sisteminin gelişme ihtiyacına göre paralel olarak süreklilik arz eder. Bu nedenle Kalite yönetim sistemleri nin sürekli gelişme anlayışına uygun olarak ve müşterilerin değişen talep ve beklentilerine cevap verecek şekilde daha üst bir performans düzeyine çıkarılması için çaba sarf edilmelidir. Kalite yönetim sistemlerinin evrim sürecinde uzun vadede benimsenmesi gereken hedef sürekli mükemmellik anlayışı ile Toplam Kalite Yönetimi stratejisini geliştirmek ve bunu kuruluşun bütününe uygulayabilmektir.
 
<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/9000.png" style="float: center;" width="700" height="300" title="9000" />


## Malcolm Baldrige Ulusal Kalite Ödülü 

Malcolm Baldrige Ulusal Kalite Ödülü (MBNQA) 1987 yılında ABD Kongresi tarafından oluşturulmuş kalite değerlendirme ve ödüllendirme sistemidir. Performans mükemmelliği için ABD kuruluşlarını tanımak için yıllık olarak verilmektedir. Kuruluşlara beş kategoride ödül verilmektedir: üretim, hizmet, küçük işletme, sağlık ve eğitim. Her kategoride her yıl üç ödül verilebilir. Birçok kuruluş ödüller için rekabet etmektedir ve birçok şirket, öz değerlendirme için performans mükemmelliği kriterlerini kullanmaktadır. Ödül, NIST (Ulusal Standartlar ve Teknoloji Bürosu) tarafından verilmektedir.

Değerlendirmenin 1000 puan üzerinden yapıldığı ödül sisteminde yedi farklı kategori bulunmaktadır ve her biri farklı puanlara dolayısıyla farklı ağırlıklara sahiptir.

**Ödül Kategorileri**

- Liderlik
- Stratejik Planlama
- Müşteri ve Piyasa Odağı
- Ölçme, Analiz ve Bilgi Yönetimi
- İnsan Kaynakları Odağı
- Süreç Yönetimi
- Sonuçlar

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/malcolm.png" style="float: center;" width="500" height="500" title="Malcolm Baldrige" />


## Altı Sigma

Motorola, ürünlerine olan talebe yanıt olarak 1980'lerin sonunda altı sigma (six sigma (6$\sigma$)) yaklaşımını geliştirmiştir. Altı sigmanın odak noktası, ürün (kalite) özelliklerindeki değişkenliği azaltmak, başarısızlık veya kusurları minimum seviyeye indirmektir. Müşteri odaklı bir yöntem olan altı sigma, sorunun çözümü için müşterinin temel gereksinimlerine önem verir. Altı sigma, müşteri memnuniyetini arttıran, paralelinde rekabet gücünde artış sağlayan ve böylece karlılık getiren bir sistem olarak özetlenebilir. Motorola'nın 1988 yılında Malcolm Baldrige ödülünü kazanması ile daha da yaygınlaşmıştır.

Sıfır hatayı hedefleyen yöntem, doğru uygulandığında oldukça başarılı sonuçlar elde etmektedir. Altı sigma yaklaşımı bir milyon üründe _(parts per million (ppm))_ yalnızca 3.4'lük hata seviyesinde çalışmaktadır. Bu bakımdan mükemmeliyet hedefleyen firmalar için tercih edilen bir yaklaşımdır.

Sigma standart sapmanın simgesi, standart sapma da istatistiksel olarak yayılım ve değişkenlik ölçüsüdür.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/sapma1.png" style="float: center;" width="150" height="100" title="mean shifted" /> <img src="/Users/busenursarica/Documents/GitHub/quality-control/images/sapma2.png" style="float: center;" width="150" height="100" title="mean shifted" />

Altı sigma yaklaşımında da hataları düzeltme yerine önleme yaklaşımını içeren **proaktif** gelişme modeli tercih edilmiştir. Problemlerin sonuçları yerine nedenleri üzerine odaklanma esastır.


<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/normal.png" style="float: center;" width="700" height="300" title="normal" />
  
  
<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/ndist.png" style="float: center;" width="500" height="200" title="normal distribution" />

```{r}
(1-0.9973)*1000000  #milyon fırsattaki hata sayısı 
```

    
Motorola altı sigma konsepti, prosesdeki değişkenliği azaltmak için spesifikasyon sınırlarını ortalamadan en az altı standart sapma uzaklıkta olacak şekilde konumlandırmaktadır. Çalışmalar sonucunda uzun vadede spesifikasyon sınırları orta noktasından (-+)1.5$\sigma$ kadar sapabildiği, dolayısıyla 6$\sigma$ ile milyonda 3.4 kusurluya ulaşılabileceğini ortaya koymuştur.
  
    
<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/sixsigma.png" style="float: center;" width="700" height="300" title="sixsigma" />
      
      
<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/mshifted.png" style="float: center;" width="500" height="200" title="mean shifted" />

<br>

Farklı kayma miktarlarına bağlı olarak sigma seviyeleri;

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/slevel.png" style="float:center;" width="600" height="350" title="Pozisyonlar" />
        
### Neden 6$\sigma$        

6$\sigma$'nın asıl hedefinin 3.4 ppm hata seviyesinde çalışmak olduğundan bahsetmiştik, %99.99966 hatasızlığa karşılık gelmektedir. Günlük yaşamdaki çok basit işlerde bile 6$\sigma$'nın ne kadar önemli yere sahip olduğunu bir örnekle açıklayalım.

Bir fast food restoranına gittiğinizi varsayalım. Hamburger (hamburger ekmeği, köfte, özel sos, peynir, turşu, soğan, marul ve domates), kızarmış patates ve içecek sipariş verdiniz. Siparişiniz (ürün) 10 birimden oluşuyor. %99 kalite sizi memnun eder mi? (10 birimin birbirinden bağımsız olduğu varsayılır)

**Yemeğin iyi olma olasılığı;**

P{Yemeğin iyi olması}=$(0.99)^{10}=0.9044$

Yaklaşık %90 olasılıkla yemeğinizden memnun olacaksınız. Peki bu yemeği dört kişilik bir aile olarak yemiş olsaydınız memnuniyetiniz değişir miydi?

<br>

**Tüm yemeklerin iyi olma olasılığı;**

P{Tüm yemeklerin iyi olması}=$(0.9044)^{4}=0.6690$

Tüm yemeklerin yalnızca 2/3'ü iyi olma ihtimaline sahip görünüyor. Memnuniyet seviyenizin düştüğü açık. Peki ailenizle birlikte her ay hamburger yemek için çıktığınızda durum ne olacak?

<br>

**Bir yıldaki tüm yemeklerin iyi olma olasılığı;**

P{Bir yıldaki tüm yemeklerin iyi olması}=$(0.6690)^{12}=0.0080$

Memnuniyet açısından kabul edilemez bir olasılık! Görüldüğü üzere oldukça basit bir ürün için bile oldukça yüksek düzeyde kalite ve hizmete ihtiyaç vardır.

<br>

> 3$\sigma$ seviyesinde üretim yapan bir çok şirket ürettiği her bir milyon parçada 66.000 kusurlu parça çıkmasından dolayı toplam gelirlerinin yaklaşık %25'ini kaybetmektedirler.

<br>

Gönderilen her 300.000 mektupta;

  - 3$\sigma$ ile 3000 kayıp
  - 6$\sigma$ ile 1 kayıp

Her hafta TV yayını;

  - 3$\sigma$ ile 1.68 saati bozuk yayın yapıyor.
  - 6$\sigma$ ile 1.8 saniye bozuk yayın yapıyor.
  
  

### Sigma Kalite Seviyesi

Altı sigma yaklaşımı, kalite seviyelendirmesini _sigma kalite seviyesi_ ölçütüne bağlı olarak değerlendirmektedir. Yaklaşımın isminden de anlaşılacağı üzere hedef, sigma kalite seviyesinin 6 olmasıdır. Bir milyonda 3.4 hata olması anlamına gelen 6 sigma kalite seviyesi aynı zamanda hatasız yüzdesinin %99.99966 olması anlamına gelmektedir. Her ne kadar %99 hatasız oranı kusursuza yakınmış gibi görünse de gerçek hayatta ne denli önemli olduğunu anlamak adına örnekler verelim;

- Bir saatte kaybolan 20.000 mektup
- Her hafta 5000 yanlış ameliyat gerçekleşmesi
- Her ay yaklaşık 7 saat elektrik kesintisi (6$\sigma$ seviyesinde 8.8sn)
- Her yıl 200.000 adet yanlış reçete yazılması

> Sistemdeki iyileşme, değişkenliğin azalması ile mümkündür, bu da istatistiksel olarak standart sapma yani sigmanın azalması anlamına gelir. İyileşme aynı zamanda 'sigma kalite seviyesindeki' artış olarak da tanımlanır, bu bakımdan ifadeleri karıştırmamak önemlidir.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/positions.png" style="float:center;" width="500" height="250" title="Pozisyonlar" /> 

**Örn:** Bir pastanenin 200 adet üretmiş olduğu pastanın 2 adedinin hatalı (yanık vs.) olması durumunda pasta üretim prosesinin sigma kalite seviyesini hesaplayınız.

P{Hatalı pasta üretme}=2/200=0.01 (%1)

P{Hatasız pasta üretme}=1-0.01=0.99

Z tablo değeri 2.33 olduğundan 2.33+1.5=3.83


<br>

Sigma seviyeleri arasında geçiş için harcanacak çaba üst seviyelerde giderek artmaktadır. Sigma seviyesinin 2'den 3'e çıkarılması için hata sayısında yaklaşık **4.6** katlık bir azalma gerekmektedir. Benzer şekilde 3'den 4'e çıkarmak için **10.7** katlık, 4'den 5'e çıkarmak için **26.7** katlık ve 5'den 6'ya çıkarmak için **68.5** katlık bir iyileştirme gerekmektedir.



### Altı Sigma Proje Yönetimi
Altı sigma yaklaşımının uygulaması bu alanda uzmanlaşan kişiler tarafından gerçekleştirilmektedir. Uzmanlar, bilgi ve donanımlarına bağlı olarak; yeşil kuşak, kara kuşak, uzman kara kuşak, şampiyon ve liderlik konseyi olarak isimlendirilmektedir.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/ssgma.png" style="float:right;" width="300" height="300" title="sixsigma" /> 


**Yeşil kuşak (Green Belts (GBs)):** Projelerde kısmi zamanlı çalışan kişilerdir. Sorumlulukları;

- Proje şampiyonu ile proje amacını tanımlamak
- Proje sürecinde takıma her türlü desteği sağlamak
- Proje süresince gerekli veri analizlerini gerçekleştirmek
- 6$\sigma$ araçlarının kullanımı ile ilgili takımı bilgilendirmek


**Kara kuşak (Black Belts (BBs)):** İyileştirme takımının lideridir, ve şu özellikleri barındırır;

- Prosesi iyileştirme yeteneği
- Takım çalışmasına yatkın olma ve empati
- Müşteri odaklı düşünebilen
- 6$\sigma$ araçlarını etkin kullanabilme

Kara kuşaklar 4 ay süreyle eğitim alırlar, aday olarak çalıştıkları projede başarılı olmaları durumunda _uzman kara kuşak_ ünvanını almaya hak kazanırlar.

**Uzman Kara kuşak (Master Black Belts (MBBs)):** Proje sorumlusu olarak liderlik vasfı mevcuttur. Yöntem ve araçlara hakimdir, teknik danışman olarak da tanımlanabilir.

- Proje takımına istatistiksel yöntemler başta olmak üzere her konuda teknik destek sağlamak
- Şampiyonlara proje sürelerinin belirlenmesinde yardımcı olmak
- 6$\sigma$ yöntemlerini uygulamak
- Yeşil ve Kara kuşaklara eğitim verme ve mentorluk yapmak

**Şampiyon (Champion):** Proje uygulama ve yürütme adımlarında aktif rol oynar, sponsorluk ve liderlik rolü bulunur. 

- Projeyi belirlemek
- Proje takımı ve yönetim arasında köprü olmak
- Projeler için kaynak bulmak
- Proje takımını yönetim katında temsil etmek ve savunuculuğunu üstlenmek
- Yol gösterici olmak ve projeyi odak noktası haline getirmek
- Projede 6$\sigma$ yöntemlerinin kullanılmasını sağlamak

**Liderlik Konseyi (Leadership Team):** 6$\sigma$ başarısı için destek ve yönlendirmeyi sağlar. Sorumlulukları;

- 6$\sigma$ yönetimini incelemek
- Projeler ve işletme hedefleri arasında ilişki kurmak
- Proje sürecini yakından takip etmek

<br>

Altı sigma uygulamaları 3 nesile ayrılmıştır;

**I. Nesil (Generation I):** 1987-1994 yılları, değişkenliğin azaltılması ve hataların elenmesi odak noktası olmuştur. Örn: Motorola

**II. Nesil (Generation II):** 1994-2000 yılları, I. nesilin devamı olarak ürün tasarımlarında iyileştirme ve maliyetlerin azaltılması odak noktası olmuştur. Örn: General Elektrik

**III. Nesil (Generation III):** 2000 li yıllar ve sonrası, geçmiş nesillere ek olarak değer yaratma (yeni ürünler üretilmesi, pazarın genişletilmesi, hisse senetlerindeki değer artışı ) odak noktası olmuştur.


Son yıllarda _yalın sistemler (lean systems)_ ve _altı sigma için tasarım (design for six sigma (DFSS))_ olmak üzere iki yaklaşım daha tanımlanmıştır. Birçok kuruluş bu yaklaşımların birini veya her ikisini de altı sigma yaklaşımlarına dahil etmişlerdir. Altı sigma özellikle bu yaklaşımlarla birlikte kullanıldığında oldukça başarılı olmaktadır. 

<center><img src="/Users/busenursarica/Documents/GitHub/quality-control/images/tri.png" style="float:center;" width="600" height="400" title="sixsigma" /><center> 

[The Six Sigma Revolution by Thomas Pyzdek](http://www.bxlnc.com/download/The-Six-Sigma-Revolution.pdf)

Altı sigma yaklaşımı **DMAIC** olarak tanımlanan bir yol haritası eşliğinde uygulanır.

## Kalite Maliyetleri

Kalite maliyetleri ölçülebilen (kalite kontrol giderleri, üretim kaybı, hurda) ve ölçülemeyen (müşteri kaybı, pazar kaybı, imaj kaybı) kısımları nedeniyle buz dağına benzetilmektedir. Ölçülemeyen kısımların etkileri uzun zamanda görülmektedir. Kalite maliyetleri üç ana başlıkta incelenebilir;

**Önleme maliyetleri:** kalite standartlarından sapmaları önlemek amacıyla gerçekleştirilen çalışmalara ait harcamalar

**Ölçme ve değerlendirme maliyetleri:** kalite özelliklerinin ( giriş, ara ve son kontrol, cihaz bakımı) değerlendirilmesi için gerçekleştirilen çalışmalara ait harcamalar

**Başarısızlık maliyetleri:** kalite standartlarından sapmaların neden olduğu maliyetler olup iç ve dış başarısızlık maliyetleri olarak iki başlık halinde incelenir. İç başarısızlık maliyetleri; ıskarta, hurda, fire vb., dış başarısızlık maliyetleri; reddedilen ürünler, gecikme farkları, garanti giderleri vb.

<center><img src="/Users/busenursarica/Documents/GitHub/quality-control/images/qcost.png" style="float:center;" width="600" height="200" title="Quality Cost" /><center>


<!--chapter:end:03-Kalite-Yönetimi-Temel-Kavramları.Rmd-->

# DMAIC Süreci

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/dmaic.png" style="float:right;" width="300" height="270" title="DMAIC" />

DMAIC, kalite ve süreç iyileştirmede yaygın olarak kullanılan yapılandırılmış bir problem çözme yöntemidir. Tanımlama (define), ölçme (measure), analiz (analyse), iyileştirme (improve) ve kontrol (control) adımlarından oluşur. Genellikle altı sigma yaklaşımı ile ilişkilendirilir ve altı sigmanın neredeyse tüm uygulamaları, proje yönetimi ve tamamlanması için DMAIC sürecini kullanır. Ancak, DMAIC resmi olarak altı sigmaya bağlı değildir ve bir kuruluşun altı sigma kullanmasına bakılmaksızın kullanılabilir. Örneğin, döngü süresinin azaltılmasına, iş hacminin iyileştirilmesine ve kaybın (waste) ortadan kaldırılmasına odaklanan yalın (lean) projeler, DMAIC kullanılarak kolayca ve verimli bir şekilde yürütülebilir.

DMAIC yapısı yaratıcı düşünmeyi teşvik eder. Süreç kötü çalışıyorsa, orijinal süreci terk etmek ve baştan başlamak gerekliyse veya yeni bir ürün veya hizmetin gerekli olduğu belirlendiğinde, DMAIC'in iyileştirme adımı tasarım adımı haline gelir. Altı sigma yaklaşımında, bu muhtemelen Altı Sigma için Tasarım (DFSS) adımının gerekli olduğu anlamına gelir.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/D.png" style="float:center;" width="600" height="200" title="DMAIC" />

**(D)EFINE:** Tanımlama aşaması, potansiyel problemi tanımlamak ve bu problemin müşteri tatminine, paydaşlara, çalışanlara ve karlılığa etkisini belirlemek amacıyla yapılır. Bu aşamada, kritik müşteri istekleri, proje amaç ve hedefleri, ekibin rolleri ve sorumlulukları, süreç haritası ve performans kriterleri tanımlanır

<br>

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/M.png" style="float:center;" width="600" height="200" title="DMAIC" />

**(M)EASURE:** Ölçme aşamasında proje durum raporu doldurularak termin ve hedefler belirlenir. Ardından proje ekibi seçilir ve bu ekipte süreçten, tedarikçilerden ve müşterilerden temsilcilerin bulunmasına dikkat edilir. Sürecin akış diyagramı çizilirken, girdiler ve çıktılar belirlenir. Problemi oluşturan sürecin çıktıları ile girdilerinin bir listesi hazırlanarak, sebep-sonuç diyagramı, sebep-sonuç matrisi ve hata türü ve etkileri analizi (FMEA) gibi araçların kullanımı ile sebep- sonuç ilişkileri incelenir. Bu aşamada temel amaç, projenin girdi ve çıktılarının doğru olduğundan emin olmak ve mevcut durumu değişik görsel analizler yardımı ile ortaya koymaktır. Süreç performans göstergelerinin ne kadar doğru ölçülüp ölçülmediğinin belirlenmesi çalışmaları bu aşamada yürütülür.

<br>

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/A.png" style="float:center;" width="600" height="200" title="DMAIC" />

**(A)NALYSE:** Analiz aşamasında, problemin ya da sürecin mevcut performansı ile arzu edilen hedef arasındaki boşluğu ortadan kaldırmak için yöntemleri saptamaya yönelik analizler yapılır. Bu aşamada verilerin anlaşılmasına yardımcı olması için istatististiksel veri analizleri kullanılır.

<br>

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/I.png" style="float:center;" width="600" height="200" title="DMAIC" />

**(I)MPROVE:** İyileştirme aşamasında, sürecin sahip olduğu sorunları ortadan kaldıracak çözümler tasarlanır ve uygulama planları geliştirilir. Gerekli kişilerin hizmet içi eğitim ve motivasyon sistemleri sayesinde iyileştirme sistemine dahil edilmesi ile iyileştirilmenin sürekliliği sağlanır.

<br>

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/C.png" style="float:center;" width="600" height="200" title="DMAIC" />

**(C)ONTROL:** Kontrol aşamasında, süreç iyileştirmesi başarılı ise doğrulanır ve zaman içinde iyileştirmenin süreceğinden emin olunur. Yapılacak işlem; insana dayalı yanlışları gidermek, güncel eğitimi sağlamak, kontrol prosedürlerini güncelleştirmek, değişmenin özel nedenlerini yok ederek yeni sürecin istatistiksel süreç kontrolü altına alınmasını sağlamaktır. Yeni süreç kararlı olduğunda elde edilen gerçek iş sonuçları belgelendirilir. **Eğer hedefler karşılanmaz ise düzeltici faaliyet olarak DMAIC döngüsü tekrar başlatılır.**

<!--chapter:end:04-DMAIC-Süreci.Rmd-->

---
output:
  pdf_document: default
  html_document: default
  word_document: default
---
# İstatistiksel Kavramlar

İstatistik verinin toplanmasını, düzenlenmesini, analiz edilmesini ve yorumlanmasını sağlayan bir disiplindir. İstatistik betimsel (tanımlayıcı (descriptive)) ve çıkarımsal (tümevarımsal (inferential)) amaçlı istatistik olmak üzere ikiye ayrılır. 

**Betimsel istatistik:** Verilerin tablolar, grafikler veya özet istatistikler aracılığıyla betimlenmesi ve özetlenmesi ile ilgilidir. Bu sayede büyük veri kümeleri tek bir tablo, grafik veya özet istatistik ile temsil edilmekte ve herkes tarafından kolay anlaşılabilir bir biçimde sunulmaktadır.

**Çıkarımsal istatistik:** Kitleden rasgele seçilen örneklemden toplanan verileri kullanarak kitlenin parametrelerini tahmin etmeyi ve parametrelerle ilgili savların doğruluğunun araştırılmasını amaçlar. Çıkarımsal istatistikte örnekten elde edilen bilgilere dayanarak kitle hakkında kestirimlerde bulunmak, sonuçlar çıkarmak ve kararlar vermek istatistiğin önemli bir bölümünü oluşturur.

## Verilerin Toplanması ve Sunulması

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/alien.jpg" style="float: right;" width="400" height="270" title="Remind!" /> 

Veri; analiz, karar ve faaliyet için temeldir bu nedenle tüm veriler özellikle işlem ve üretim noktalarında kayıt edilmelidir. Sistematik ve doğru kayıt bu bakımdan oldukça önemlidir. Verinin yapısı prosesten prosese farklılık gösterebilir. Maliyet ve emek kaybının önlenmesi için yalnızca ihtiyaç duyulan veriler kayıt altına alınmalıdır. 

Verilerin istenilen hassasiyette ve doğru elde edilebilmesi için ölçü aletlerinin uygunluğu ve güvenilirliği sağlanmalıdır, ancak bu şekilde tekrarlanabilirlik mümkün olacaktır.

Kalite hakkında bilgi _sayarak_ veya _ölçerek_ elde edilebilir. Bu bakımdan veri tipleri niceliksel (variables) ve niteliksel (attributes) olarak ikiye ayrılmaktadır. 

**Niteliksel veri (attributes):** Sayarak elde edilen veri tipi belirli aralıklarla ortaya çıkmaktadır. Ör: 10 adetlik bir örnek gruptaki hatalar 0, 1, 2 gibi olabilir. Belirli uzunluktaki bir kumaştaki hataların sayısı, bir sayfadaki yazım hatalarının sayısı niteliksel veri tipine örnek olarak verilebilir.

**Niceliksel veri (variables):** Ölçerek elde edilen veri tipleri sürekli yapıdadırlar. Örn: sıcaklık, ağırlık, hacim, zaman vb.

Veri toplanırken bazı noktalara dikkat edilmesi gerekir.

- Amaca uygun hassasiyette veri toplanması gerekir.
- Verinin hassasiyeti ölçü aleti hassasiyetini aşamaz. Ör: 0.0001g hassasiyetle yapılması gereken tartım için 0.001g hassasiyete sahip terazi kullanılamaz.
- Gözlem sayısı, örnekleme yöntemi ve analiz için kullanılan yöntem araştırılan konuya uygun olarak belirlenmelidir.
- Veri toplanırken gerekli tüm koşullar saptanmalı ve kaydedilmelidir. (İlgili vardiya, üretimi yapan kişi, kullanılan cihaz, hammadde, çevre koşulları vb.)



Veri toplama işlemi otomatik veya manuel olarak yapılabilir. Çalışılan duruma bağlı olarak her iki yöntemin de avantajlı olduğu durumlar mevcuttur.

**Manuel sistem;**

- Veri toplayan kişi prosese daha yakındır ve daha iyi anlamaya çalışır.
- Veri toplayan kişi proses üzerinde tecrübe sahibi oldukça neden-sonuç ilişkisi kuracak ve yorumlayabilecektir.
- Veri toplanması daha dinamik hale gelecek, gerekli ve gereksiz parametreler açığa çıkacaktır.
- Geçici faaliyetler için manuel sistemlerin kullanımı hem pratik hem de ucuzdur.

**Otomatik sistem;**

- Değişimin çok hızlı olduğu durumlarda kullanışlıdır.
- Çok sayıda veri aynı anda toplanabilir.
- Sağlık ve emniyet açısından manuel veri toplamanın riskli olduğu durumlarda kullanılabilir.
- Veri toplama ve analiz aşamasının hızlı olması gerektiğinde kullanışlıdır.
- Fazla miktarda veri toplanması bakımından avantajlıdır.

## Değişkenliğin Tanımlanması

### Dal-Yaprak Grafiği

Bir proses tarafından üretilen iki ürün birimi aynı değildir. Bazı değişiklikler kaçınılmaz olarak ortaya çıkmaktadır. Örnek olarak, bir içecek şişesinin net içeriği, şişeden şişeye biraz değişir ve bir güç kaynağının çıkış voltajı, bir üniteden diğerine tam olarak aynı değildir. İstatistik, verilerdeki bu değişkenlikleri hesaba katarak analiz etme ve sonuç çıkarmada faydalandığımız bilimdir.

Verilerin sunulması için kullanılan başarılı görsellerden biri de dal-yaprak (steam and leaf) grafiğidir. 

Çalışan Sağlık Sigortası Taleplerinin Ödenmesi İçin Gün Olarak Döngü Süresi 

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/claim.png" style="float: center;" width="500" height="250" title="Claim-Days" /> 

```{r include=FALSE,cache=TRUE}
claim<-1:40
days<-c(48,41,35,36,37,26,36,46,35,47,35,34,36,42,43,36,56,32,46,30,37,43,17,26,28,27,45,33,22,27,16,22,33,30,24,23,22,30,31,17)
data<-cbind(claim,days)
data
```

```{r}
stem(days)  #dal-yaprak grafiği
```

Dal-yaprak grafiği verinin yayılım ve merkezi eğilimi hakkında fikir sahibi olmamızı sağlamaktadır. Bu bakımdan oldukça faydalı olmakla birlikte gözlemlerin zaman sırasını hesaba katmaz. Zaman, genellikle kalite iyileştirme problemlerindeki değişkenliğin yorumlanmasına katkıda bulunan önemli bir faktördür. Zamanı dikkate alan grafikler üretmek ve yorumlamak da mümkündür.


```{r echo=FALSE, message=FALSE, warning=FALSE,cache=TRUE}
library(plotly)
library(htmltools)

p<-plot_ly(as.data.frame(data), x = ~claim, y = ~days)
htmltools::tagList(p)
```

### Frekans Dağılımı

Kitle (popülasyon) çok sayıda birimden oluşuyorsa, bu birimleri sınıflandırmak kitlenin çeşitli özelliklerinin belirlenmesini kolaylaştıracaktır. Sınıflandırmanın en doğru yolu frekans tablosudur. Bu yapıda gözlenen veri sınıflara ayrılır, sonuçlanan tablo her bir sınıftaki gözlem sayısını vermektedir.

SPC açısından prosesteki değişkenleri açıkça görebilmek ve prosesin geçerliliği hakkında bir yargıya varabilmek için örneklerden elde edilen verilerin büyüklüklerine göre gruplandırılması gerekmektedir.

Frekans tablosu oluşturulurken dikkat edilmesi gereken noktalar aşağıda yer almaktadır.

- Sınıflar ayrık olmalıdır.

|**Yanlış** |   |**Doğru**  |
|:---------:|---|:---------:|
|4.00 - 4.50|   |4.00 - 4.49|    
|4.50 - 5.00|   |4.50 - 4.99|          

- Sınıflar veri kümesinde yer alan her değeri içine almalıdır.
- Sınıf limitleri ve sınıf sayısı hiç bir sınıf boş kalmayacak şekilde seçilmelidir.

<br>

**Frekans tablosu hazırlanması;**

Konu ile ilgili veriler mümkün olduğunca duyarlı , aynı ölçü birimi ile ve duyarlılığı aynı rakamlarla tespit edilir.

En büyük ve en küçük değerler arası fark, yani **değişim genişliği (range)** bulunur. Değişim genişliği belirlenen **sınıf sayısına** bölünerek **sınıf aralığı** tespit edilir. Burada önemli nokta sınıf sayısının kaç olduğuna karar vermektir. Bu karar verinin miktarına ve cinsine bağlı olarak uzman tarafından verilmekle birlikte genellikle 5-20 arasında seçilmektedir. Sınıf sayısının belirlenmesinde sıklıkla kullanılan bir yöntem de **Sturgess Kuralı**'dır. 

<br>

$K=1+3.3log_{10}N$

burada K sınıf sayısı, ve N toplam veri adedidir.

```{r}
1+3.3*(log(400,base=10))  #sturgess
```
<br>


**Örnek:** Bir ipek ipliğine ait mukavemet değerleri için frekans tablosu oluşturunuz.

```{r}
muk<-c(83,63,81,76,54,87,84,86,84,60,71,90,92,78,92,84,53,68,80,83,84,71,65,81,94,73,95,82,81,71,76,92,69,61,102,84,67,68,108,88,82,67,78,89,80,97,103,86,64,97,99,89,76,68,65,94,75,95,103,74,103,94,103,83,88,64,67,81,91,97,84,70,105,99,76,72,96,63,84,82,78,89,80,92,106,73,71,70,94,76,71,75,91,81,70,78,56,73,68,82,88,78,81,71,73,81,94,90,61,71,64,54,93,86,87,81,71,65,90,74)

N=length(muk); N    #gozlem sayisi
```
<br>

**En büyük gözlem**
```{r}
enb<-max(muk); enb
```
<br>

**En küçük gözlem**
```{r}
enk<-min(muk); enk
```
<br>

**Değişim genişliği (range)**
```{r}
range=enb-enk  #degisim genisligi
range
```
<br>

**Sınıf sayısı**
```{r}
K=1+3.3*(log(N,base=10));K   #sturgess
round(K)  
```
<br>

**Sınıf aralığı**
```{r}
ara<-range/round(K); ara
```
<br>

**Ödev:** Aşağıda yer alan mukavemet verisi için frekans tablosunu elde eden kodu yazınız.

```{r}
factorx <- factor(cut(muk, breaks=nclass.Sturges(muk)))
#Tabulate and turn into data.frame
xout <- as.data.frame(table(factorx))
#Add cumFreq and proportions
xout <- transform(xout, cumFreq = cumsum(Freq), relative = prop.table(Freq));xout
```

### Histogram

Histogram verinin yayılımını göstermektedir ve SPC'ün temeli verideki değişkenliği tanımlamaktır. Histogramın kullanım amaçları şu şekilde sıralanabilir;

- Problemleri çözmek
- Proses yeterliliğini analiz etmek
- Spesifikasyonlar ve gerçekleşen veriyi karşılaştırmak
- Popülasyonun şekli hakkında fikir edinmek
- Veri farklılıkları ve boşlukları ortaya koymak


Mukavemet örneği histogramı;

```{r warning=FALSE,cache=TRUE}
fig<-plot_ly(x = ~muk,type = "histogram") 
htmltools::tagList(fig)
```

```{r echo=FALSE}
xout
```


### Merkezi Eğilim Ölçüleri

Frekans dağılımının simetrik, sağa veya sola çarpık olma durumu merkezi eğilim ölçüleri yardımıyla belirlenir. Merkezi eğilim ölçüsü olarak üç ölçü sıklıkla kullanılır, bunlar;

- Ortalama (mean)
- Medyan (ortanca (median))
- Mod  (tepedeğer (mode))

<br>

**Ortalama:** $x_{1},x_{2},...,x_{n}$ örneklemde yer alan gözlemler olmak üzere;

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/mean.png" style="float: center;" width="700" height="110" title="Mean" />

eşitliği, en önemli merkezi eğilim ölçüsü olan ortalamayı elde etmemizi sağlar. Gözlem değerlerinde meydana gelen çok küçük değişmeler aritmetik ortalamayı etkiler, bu nedenle aykırı değer durumunda kullanımına dikkat edilmelidir. Bir veride yalnızca bir aritmetik ortalama vardır. Nicel verilere uygulanabilir.

<br>

**Medyan:** Gözlem değerleri en küçükten en büyüğe sıralandığında tam ortaya düşen gözlem medyan (ortanca)'dır.Gruplanmamış verilerde gözlem sayısı tek ise medyan tam ortadaki gözlemdir ancak gözlem sayısı çift ise tam ortaya denk gelen iki gözlemin aritmetik ortalamasıdır.

Medyan aykırı değerlerden etkilenmez, bu bakımdan aritmetik ortalamadan üstündür. Ancak aritmetik ortalamanın daha hassas olduğu unutulmamalıdır. Bir veride yalnızca bir medyan vardır. Nicel verilere uygulanabilir.

<br>

**Mod:** Veriler arasında en çok tekrar eden gözleme mod (tepedeğer) denir. Hassaslığı en az olan ölçüdür ancak hesaplanması kolaydır. Hem nitel hem de nicel veriler için kullanılabilir. 

<br>

Bir frekans dağılımı için ortalama, medyan ve mod değerleri birbirine eşit ise dağılım **simetriktir (symmetrical)**. Mod $<$ Medyan $<$ Ortalama şeklinde sıralama söz konusu ise dağılım **sağa çarpık (positive skewness)**, Ortalama $<$ Medyan $<$ Mod şeklinde ise dağılım **sola çarpıktır (negative skewness)**.


<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/sym.png" style="float: center;" width="900" height="300" title="Skewness" /> 

```{r}
# Frequency

d<-c(10,10,11,12,12,12,12,12,12,13,13,14,15,20,20,23)
table(d)
```



```{r}
t<-rnorm(1000)^2

mean<-mean(t)     #mean

median<-median(t)  #median

freq <- table(t);   #frequency

mode<-as.numeric(names(freq)[which.max(freq)])   #mode

sort(c(mean=mean,median=median,mode=mode))


```

```{r,cache=TRUE}
fig<-plot_ly(x = t, type="histogram")
htmltools::tagList(fig)
```


### Yayılım Ölçüleri

Merkezi eğilim ölçülerinin yanında, verinin nasıl yayıldığını ve ortalama değerin her bir tarafında nasıl dağıldığını ortaya koyan yayılım ölçüleri verinin tanımlanması ve anlamlandırılması açısından önem taşımaktadır. Yayılımın analizi için üç ölçü yaygın şekilde kullanılır;

- Genişlik
- Standart Sapma
- Varyans

**Genişlik (range):** Genişlik yayılımı hesaplamak için en kolay yoldur. Veri kümesindeki en büyük ve en küçük değer arasındaki farka karşılık gelir. 

**Standart Sapma:** Standart sapma, yayılım için kullanılan bir diğer ölçüdür. Verinin sınıflandırılmış veya sınıflandırılmamış olmasına bağlı olarak farklı şekillerde hesaplanmaktadır.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/sd.png" style="float: center;" width="700" height="110" title="Sd" />

**Varyans:** Varyans en hassas yayılım ölçüsüdür. Gözlemler arasındaki değişimi ölçer. Varyansın pozitif karekökü ise standart sapmayı ifade eder. Verideki birimlerin değerleri aritmetik ortalama etrafında yoğunlaşıyorsa varyans küçüktür ve bu durum verinin homojen olduğunu dolayısı ile kaliteyi gösterir. Gözlemlerin aldıkları değerler aynı ise varyans sıfırdır. Aşağıdaki eşitlikte örneklem varyansı formülasyonu yer almaktadır. 


<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/var.png" style="float: center;" width="700" height="110" title="Variance" />

<br>

Araştırmada iki kitle üzerinde çalışılıyorsa bu iki kitlenin aritmetik ortalamaları eşit olduğu durumda varyansı küçük olan kitle daha homojen olarak tanımlanırken aritmetik ortalamaları farklı iki kitleyi varyans açısından yorumlamak doğru olmayacaktır. Bu durumda **değişim katsayısından** faydalanılır.

$C=\sigma/\mu$ olarak tanımlanan değişim katsayısı ölçü birimlerinden kaynaklanan farklılıkları da gidermektedir.

Çarpıklık-basıklık katsayıları ve değişken katsayısı da yayılım ölçüsü olarak kullanılabilmektedir.



### Kutu Grafiği (Box Plot)

Dal-yaprak grafiği ve histogram, bir veri seti hakkında görsel bir izlenim sağlarken, örnek ortalaması ve standart sapma, verilerin belirli özellikleri hakkında nicel bilgi sağlar. Kutu grafiği, verilerin merkezi eğilim, yayılma ve aykırı gözlemlerin gözlenebilmesi gibi verilerin birkaç önemli özelliğini eşzamanlı olarak görüntüleyen bir grafik türüdür.

Aykırı değerlerin varlığı tanımlayıcı istatistiklerin yanlış hesaplanmasına neden olur bu nedenle tespit edilmeleri oldukça önemlidir ve kutu grafiği bu bakımdan oldukça faydalıdır.

Kutu grafiğinin oluşturulabilmesi için gerekli 5 önemli değer bulunmaktadır. En küçük değer, birinci çeyrek değer ($Q_{1}$), medyan, üçüncü çeyrek değer ($Q_{3}$) ve en büyük değer. Kutu grafikleri iki farklı dağılımın karşılaştırılmasında kolaylık sağlar.

> En küçükten en büyüğe sıralanmış verileri 4 eşit parçaya bölen değerlere çeyrek değerler ya da kartiller denir. 

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/boxplot.jpg" style="float: center;" width="500" height="250" title="Box Plot" />

$Q_{1}=(n+1)/4$

$Q_{3}=3(n+1)/4$

Alt limit$=Q_{1}-1.5(Q_{3}-Q_{1})$

Üst limit$=Q_{3}+1.5(Q_{3}-Q_{1})$

Veride alt limitin altında veya üst limitin üzerinde bir gözlem yer alıyorsa bu gözlem **aykırı değer** olarak nitelendirilir.

```{r,cache=TRUE}
boxp1 <- plot_ly(y = muk, type = "box",name="Mukavemet"); boxp1
```

```{r,cache=TRUE}
boxp2 <- plot_ly(y = t, type = "box",name="Norm^2"); boxp2
```

<br>

Çarpıklığı yatay eksende gözlemek daha iyi kavramamızı sağlayacaktır. Verinin sağa çarpık olduğu ve fazla miktarda aykırı değer içerdiği kutu grafikten gözlenebilmektedir.

```{r,cache=TRUE}
boxp2.horizontal <- plot_ly(x = t, type = "box",name="Norm^2 Horizontal"); boxp2.horizontal
```


### Olasılık Dağılımları

Olasılık dağılımları ve özellikle normal dağılım istatistiksel kalite kontrol ile ilgili teoremlerde önemli yer tutmaktadır. Olasılık dağılımları kesikli ve sürekli olmak üzere iki yapıda incelenmektedir. Değişkenin ölçülen değeri sürekli bir ölçek üzerinde ifade ediliyor ise bu değişkenin olasılık dağılımına sürekli dağılım, eğer ölçülen değişken 0, 1, 2... gibi tamsayılı değerler alıyorsa bu değişkenin olasılık dağılımı kesikli dağılım olarak adlandırılır.

>Değeri deneyden deneye değişen sonuçlar ile belirtilen değişkene rastgele değişken denir.



<br>

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/dist.png" style="float: center;" width="800" height="300" title="Box Plot" />


Kesikli ve sürekli olasılık dağılımları sırasıyla $(a)$ ve $(b)$ ile grafiksel olarak gösterilmiştir. $X$ rasgele değişkeninin bir $x_{i}$ değerini alma olasılığı;

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/disc.png" style="float: center;" width="700" height="60" title="Discrete" />

Sürekli dağılımda olasılık eğrinin altında kalan alana karşılık gelmektedir, $X$ rasgele değişkeninin $a$ ve $b$ arasında olma olasılığı; 

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/cont.png" style="float: center;" width="700" height="60" title="Continuous" />

Bir olasılık dağılımının ortalaması, dağılımın merkezi eğiliminin bir ölçüsüdür. Ortalama, kesikli ve sürekli dağılımlar için aşağıdaki gibi tanımlanır.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/distmu.png" style="float: center;" width="700" height="140" title="Mean" />

Bir dağılımdaki yayılma veya değişkenlik, varyans ile ifade edilir. Varyans, kesikli ve sürekli dağılımlar için aşağıdaki gibi tanımlanır.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/distv.png" style="float: center;" width="700" height="140" title="Variance" />

## Önemli Kesikli Olasılık Dağılımları

### Hipergeometrik Dağılım

Hipergeometrik dağılım istatistiksel kalite kontrolde, belirli sayıda kusurlu ve belirli sayıda kusursuz ürün içeren bir kümeden seçilen (iadesiz) belirli sayıdaki ürünün  kusurlu ve kusursuz ürün sayılarına ilişkin olasılıkları vermektedir.

Bazen sonlu elemanlı bir kitleden idesiz çekiliş yapılmak istenebilir. Bir deneyin sadece iki sonucu varsa, çekilen örnek sayısı n sabit ve denemeler bağımlı ise böyle durumlarda hipergeometrik dağılım kullanılır.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/hipgeo.png" style="float: center;" width="600" height="370" title="Hipergeometrik" />

**N:** Toplam eleman sayısı

**D:** N'in bir bölümü ($D\leq N$)

**n:** örnek hacmi

**x:** istenen durum sayısı

<br>

**Kombinasyon hatırlatma:** 

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/comb.png" style="float: center;" width="150" height="80" title="Kombinasyon" />


<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/phyp.png" style="float: center;" width="800" height="250" title="phyp.r" />

<br>

**Örnek:** İçinde 10 sağlam ve 4 arızalı ürün bulunan bir kümeden 5 ürün alınmıştır. Bu ürünlerin

  **a)** 3 adetinin sağlam olma olasılığı nedir?

```{r}
a<-dhyper(x = 3, m = 10, n = 4, k = 5); a
```
  <br>
  
  **b)** En fazla 2'sinin sağlam olma olasılığı nedir?
  
```{r}
# P(X<=2)=P(X=0)+P(X=1)+P(X=2)

tot=numeric()  # bos vektor
for(i in 0:2){
tot[i+1]=dhyper(x = i, m = 10, n = 4, k = 5)}
b<-sum(tot); b
```
  
   <br>
   
   **c)** En az üçünün sağlam olma olasılığı nedir?

```{r}
# P(X>=3)=1-(P(X=0)+P(X=1)+P(X=2))

c<-1-b
c

```

<br>

**Örnek:** Bir tekstil fabrikasında üretilmiş 1000 tişörtün 200'ünün kusurlu olduğu biliniyor. Perakende satış yapan bir mağaza sahibi 25 tişörtü rasgele seçerek alırken kusurlu tişört sayısı 4'den çok çıkarsa malı iade edeceğini söylüyor. Malı iade etme olasılığı nedir?

```{r}
# P(X>4)=1-P(X<=4)

z=numeric()  # bos vektor
for(i in 0:4){
z[i+1]=dhyper(x = i, m = 200, n = 800, k = 25)}
sum<-sum(z);

iade=1-sum; iade

```



### Binom Dağılımı

Sadece iki sonuç veren bir Bernoulli deneyinin n kez birbirinden bağımsız ve aynı koşullar altında tekrar ettiği biliniyorsa ve sıra gözetilmeden başarı türünden oluşan sonuçlarla ilgileniliyorsa bu dağılıma binom dağılımı denir. Binom dağılımı n (örnek büyüklüğü) ve p (hatalı/hatasız olasılığı) olmak üzere iki parametreye sahiptir.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/binom.png" style="float: center;" width="600" height="280" title="Binom" />

<br>

**Örnek:** Bir fabrikada üretim yapan vardiyalardan birinin ürettiği ürünlerin %10 olasılıkla kusurlu olduğu tespit edilmiştir. Bu ürünlerden rasgele 5 adet alındığında,

  **a)** 1 adedinin kusurlu olma olasılığı nedir?
  
```{r}
dbinom(1, size=5, prob=0.10)
```
  
  <br>
  
  
  **b)** En fazla 1 adedinin kusurlu olma olasılığı nedir?
  
```{r}
# P(X<=1)=P(X=0)+P(X=1)

kusur=numeric()  # bos vektor
for(k in 0:1){
kusur[k+1]=dbinom(x=k, size=5, prob=0.10)}
sum(kusur)
```
  
  <br>
  
  **c)** En az 2 adedinin kusurlu olma olasılığı nedir?
  
```{r}
# P(X>=2)=1-P(X<=1)

1-sum(kusur)
```
  
  
 <br> 
  
**Örnek:** Bir firma %5 kusurlu ürün içeren büyük bir parti maldan rasgele 120 adet seçiyor. Y bu 120 üründeki kusurluların sayısı olsun. Firma kusurlu parçaları tamir için geri gönderecektir. Tamirin maliyeti;

$M=8Y^{2}+0.5Y-10$

fonksiyonu ile hesaplanmaktadır. Tamirin beklenen maliyeti nedir?

```{r}
# E(M)=8E(Y^2)+0.5E(Y)-E(10)

# E(Y)=np

#Var(Y)= npq= E(Y^2)-E(Y)^2

ey=120*0.05
eykare=120*0.05*0.95+(ey^2)
em=8*eykare+0.5*ey-10; em
```



### Poisson Dağılımı

Poisson dağılımı belirli aralıkta gerçekleşme olasılığı çok küçük olan durumlarda kullanılır. Dağılımın tek parametresi $\lambda$ olup gerçekleşen ortalama olay sayısında eşittir. Poisson dağılımı istatistiksel kalite kontrolde ürünün bir biriminde oluşan uygunsuzlukların ya da kusur sayısının belirlenmesinde kullanılan bir dağılımdır. Zaman birimi başına gözlemleri içeren birçok durumda bu dağılım uygulanabilir.

$\lambda=np$

Poisson dağılımı, kabul örneklemesi ve ölçülemeyen özellikler için kontrol diyagramlarında bir temel oluşturmaktadır.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/poisson.png" style="float: center;" width="600" height="300" title="Poisson" />

**Örnek:** Bir fabrikada üretilen ürünler 0.004 olasılıkla kusurludur. Üretilen bu ürünlerden rassal örnekleme ile 1000 adet alınmıştır.

  **a)** 3 adet ürünün kusurlu olma olasılığı nedir?
  
```{r}
# lambda=n*p

dpois(x = 3, lambda = 1000*0.004)
```
  
  
   <br> 
   
  **b)** 3 adetten daha az ürünün kusurlu olma olasılığı nedir?
  
```{r}
# P(X<3)=P(X=0)+P(X=1)+P(X=2)

kusurlu=numeric()  # bos vektor
for(t in 0:2){
kusurlu[t+1]=dpois(x = t, lambda = 1000*0.004)}
sum(kusurlu)
```
  
   <br> 
   
  **c)** En az 2 ürünün kusurlu olması olasılıklarını hesaplayınız.

```{r}
# P(X>=2)=1-P(X<2)

kusurlu
1-sum(kusurlu[1:2])   # 2 dahil degil

```

   <br> 
   
**Örnek:** Bir büyük alışveriş merkezinde yürüyen merdivenlerin yılda ortalama 3 gün arızalandığı saptanmıştır.

  **a)** Herhangi bir ay içinde merdivenlerin hiç arızalanmama olasılığı nedir?
  
```{r}
lambda=3/365*30; lambda  #aylik

# P(X=0)
dpois(x = 0, lambda =lambda )
```
 <br>  
  
  
  **b)** Herhangi bir ay içinde merdivenlerin 2'den az arızalanma olasılığı nedir?
  
```{r}
# P(X<2)=P(X=0)+P(X=1)
d1=dpois(x = 0, lambda =lambda)
d2=dpois(x = 1, lambda =lambda)
sum(d1,d2)
```
  <br>  
  
  **c)** Bir sonraki yıl merdivenlerin hiç arızalanmama olasılığı nedir?
```{r}
lambda2=3  # yil
dpois(x = 0, lambda =lambda2)
```

  <br> 
  
**Ödev:** Bir fabrikanın deposundaki stoktan 365 gün içinde 36 ton mal çekilmiştir. Bu dönem içinde rasgele saptanan bir 15 günlük dilimde en az 3 ton mal çekilme olasılığı nedir? 



-----------------------

## Önemli Sürekli Olasılık Dağılımları

### Normal Dağılım

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/nd1.png" style="float: right;" width="300" height="150" title="Normal Dağılım" />

İstatistiksel proses kontrol uygulamalarında kullanılan sayısal hesaplamaların önemli bir bölümü verinin normal dağılıma uyduğu kabulüne göre yapılmaktadır.

Gauss dağılımı olarak da bilinen normal dağılım aşağıdaki temel özelliklere sahiptir.

- Simetriktir, çan eğrisi şeklindedir.
- Veriler ortalama etrafında yoğunlaşmıştır. Eğri altındaki alan tüm olasılıklar toplamına eşit yani 1'dir.
- Dağılımın tek bir zirvesi vardır, ortalama, mod ve medyan değeri aynıdır.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/normdist.png" style="float: center;" width="700" height="250" title="Normal Dağılım" />

Popülasyon değerlerinin %68.26'sının ortalama artı ve eksi bir standart sapma ($\mu$ ± 1$\sigma$) ile tanımlanan sınırlar arasında kalır, değerlerin %95.46'sı ortalama artı ve eksi iki standart sapma ($\mu$ ± 2$\sigma$) ile tanımlanan sınırlar arasında kalır; ve popülasyon değerlerinin %99.73'ü ortalama artı ve eksi üç standart sapma ($\mu$ ± 3$\sigma$) ile tanımlanan sınırlar dahilindedir. 

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/nd2.png" style="float: center;" width="500" height="350" title="Normal Dağılım" />

Ortalaması ve standart sapması bilinen bir popülasyona ait normal dağılım olasılıklarını hesaplayabilmek için standart normal dağılım tablosu kullanılmaktadır. Standart normal dağılım; Z$\sim$N(0,1) şeklinde ifade edilmektedir. Bir _X_ değişkeni aşağıdaki eşitlik yardımı ile Z standart normal değerine dönüştürülür ve bu sayede standart normal dağılım tablosu kullanılabilir.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/norm.png" style="float: center;" width="90" height="70" title="Normal Dağılım" />

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/ntable.png" style="float: center;" width="500" height="700" title="Normal Dağılım" />

```{r}
x=seq(0,3.09,by=0.01); head(x)
```

<br>

```{r}
prob=pnorm(x); head(prob)
```
<br>

```{r}
tablo=matrix(prob,ncol=10,byrow=TRUE); tablo
options(digits=4)
```

<br>

```{r}
rownames(tablo)=seq(0,3,b=0.1)
colnames(tablo)=seq(0,0.09,by=0.01)
tablo
```
<br>

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/pnorm.png" style="float: center;" width="700" height="250" title="Normal Dağılım" />

<br>

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/pnormz.png" style="float: center;" width="700" height="220" title="Normal Dağılım" />

<br>

**Örnek:** Bir işletme tarafından üretilen belirli bir mısır gevreğinin geçtiğimiz yıl için ortalama ağırlığı 0.297 kg ve standart sapması 0.024 kg'dır. Normal dağılım varsayımı ile, alt spesifikasyon limiti olan 0.274 kg'dan daha az üretim yapılma olasılığını bulunuz. (Ortalama ve standart sapma geçtiğimiz yıl boyunca yapılan yüksek sayıdaki testten elde ediliği için bu değerler popülasyon değerlerinin tahmini olarak düşünülmelidir.)

* pnorm fonksiyonu varyans değil standart sapma kullanılıyor!

```{r}
# P(X<0.274)
# Z=(0.274-0.297)/0.024=-0.96
# Z_0.96=0.8315     tablo degeri
# P(Z<-0.96)=P(Z>0.96)= 1-0.8315=0.1685
urt<-pnorm(0.274,mean=0.297,sd=0.024, lower.tail = TRUE); urt
```

<br>

**Örnek:** Bir fabrikada üretilen ürünlerin ortalama ağırlıkları 50 kg ve ağırlıkları dağılımının varyansı 49 kg olarak bulunmuştur. Ağırlıkların dağılımı normaldir. Bu ürünlerden 5000 adet alınmıştır. Bu 5000 üründen kaç adetinin

  **a)** 48 ile 51 kg arasında olacağını hesaplayınız.
  
```{r}
# P(48<X<51)= P(X<51)-P(X<48)
a<-pnorm(51,50,7, lower.tail = TRUE)  # varyans 49 kg
b<-pnorm(48,50,7, lower.tail = TRUE)
c<-a-b
```

```{r}
5000*c  # adet
```
<br>  
  
  **b)** 52 kg'den fazla olacağını hesaplayınız.
  
```{r}
# P(X>52)=P(Z>(52-50)/7=0.029)
dgr<-pnorm(52,50,7, lower.tail = FALSE); dgr

5000*dgr    # adet
```
<br>

**Örnek:** Büyük bir firmanın pazarlama elemanlarının aylık satış hasılasına göre dağılımı normal olup ortalaması 200 bin TL ve varyansı da 2500 olarak bilinmektedir. Firma yönetimi çok satış yapan ilk %10'a giren elemanlarına prim verecektir. Prim kazanabilmek için satış hasılası **en az** kaç olmalıdır?

```{r echo=TRUE}
# P(X>x)=0.10
emt=numeric()
for(i in 200:300)
emt[i]=pnorm(i,200,50, lower.tail = FALSE)
emt<-round(emt,3);emt

which(emt==0.10)

```



### Üstel Dağılım

Üstel dağılım adını olasılık yoğunluk fonksiyonundaki üstel fonksiyondan alır. Üstel dağılım belirli bir olayın ortaya çıkmasına kadar geçen süre olarak ortaya tanımlanır. 

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/expo.png" style="float: center;" width="600" height="350" title="Üstel Dağılım" />

<br>

**Örnek:** Bir elektronik hesap makinesi üreticisi ürün garanti süresini bir yıl olarak belirlemiştir. Hesap makinesi bu süre içinde herhangi bir nedenle arızalanırsa, değiştirilir. Arıza zamanı, aşağıdaki olasılık dağılımı ile modellenmiştir:

$f(x)=0.125e^{-0.125x}$,  $x>0$

Hesap makinelerinin yüzde kaçı garanti süresi içinde arızalanır?
  
```{r}
#lambda=0.125
# P(X<1)

pexp(1, rate = 0.125, lower.tail = TRUE)*100
```
<br>


### Gamma Dağılımı



<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/gamma.png" style="float: center;" width="600" height="350" title="Gamma Dağılım" />

Olasılık ve istatistikte çok karşılaşılan dağılımların bazıları (Üstel ve Ki-Kare gibi) Gamma dağılımının özel halidir.

$\Gamma(k+1)=k!$ 

- $X\sim Gamma(r,\lambda)$ olsun, $r=1$ için $X$ rasgele değişkeni üstel dağılıma sahiptir.

- $X\sim Gamma(r,\lambda)$ olsun, $r=p/2$ ve $\lambda=2$ için $X$ rasgele değişkeni serbestlik derecesi $p$ olan ki-kare dağılımına sahiptir.

## Olasılık Grafikleri

Belirli bir olasılık dağılımının, veriler için makul bir model olup olmadığını nasıl anlarız? Olasılık grafikleri, verilerin **öznel** bir görsel incelemesine dayalı olarak örnek verilerin varsayılmış bir dağılıma uygun olup olmadığını belirlemek için kullanılan bir yöntemdir. 

Grafik çizimi için öncelikle veriler küçükten büyüğe doğru sıralanır, ardından sıra numaralarına göre $(j-0.5)/n$ (gözlenen kümülatif sıklık) değeri elde edilir ve gözleme karşılık gelen sıralama değeri $X$ ve $Y$ eksenlerine çizilir.

Varsayılan dağılım verileri yeterince açıklarsa, çizilen noktalar yaklaşık olarak düz bir çizgi boyunca düşecektir; çizilen noktalar düz bir çizgiden önemli ve sistematik olarak saparsa, hipotez edilen model uygun değildir. Genellikle, veri grafiğinin düz bir çizgi olarak olup olmadığının belirlenmesi özneldir.

Bu nedenle goodness-of-fit testlerini kullanmak daha güvenilir ve subjektif sonuçlar elde edilmesini sağlar.

```{r message=FALSE, warning=FALSE,cache=TRUE}
j<-1:10
x<-c(86,87,87.2,87.4,87.8,88.2,88.9,89.6,89.7,90)
y<-100*(j-0.5)/10
x<-sort(x);x
plot_ly(x=x,y=y)
```

[Diğer dağılımlar için detaylı bilgi](https://www.itl.nist.gov/div898/handbook/apr/section2/apr221.htm)

<br>

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/acont.png" style="float: center;" width="400" height="150" title="Contamination" />

<br>

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/others.png" style="float: center;" width="700" height="600" title="Plots" />

## Bazı Faydalı Yaklaşımlar

### Binom - Hipergeometrik

Hipergeometrik dağılım $n\rightarrow\infty$ iken Binom dağılımına yaklaşır. Bazen sonlu elemanlı bir kitleden iadesiz çekiliş yapılmak istenebilir. Bir deneyin sadece iki sonucu varsa (sarı ve lacivert topların bulunduğu bir kavanozdan aynı anda ya da iadesiz çekiliş yapılması), çekilen örnek sayısı  sabit ve denemeler bağımlı (deneylerde birinin sonucu diğerini etkiliyorsa) ise böyle durumlarda Hipergeometrik dağılım kullanılır.  


### Binom - Poisson

$X\sim Binom(n,p)$ ve $Y\sim Poisson(\mu)$ olmak üzere, $n$ yeterince büyük olduğu durumda binom dağılımına poisson dağılımı olarak yaklaşılabilir.

Yaklaşım büyük $n$ değeri ve küçük $p$ değeri için uygundur (genellikle p <0.1). $n$'nin değeri ne kadar büyük ve $p$'nin değeri ne kadar küçükse, yaklaşım o kadar iyi çalışmaktadır.

Binom dağılımı ile Poisson dağılımı arasında bir benzerlik kurulabilir. Örneğin, belirli bir saat dilimi içinde bir mağazaya giren müşterilerin sayısı Poisson rasgele değişkenidir. Oysa, mağazaya giren (maksimum müşteri sayısı sabit) her müşteriyi başarı olarak değerlendirirsek, mağazaya giren müşterilerin sayısı Binom dağılımına sahip olur. 

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/binpois.png" style="float: center;" width="700" height="350" title="Poisson-Binom Dağılım" />

Yukarıda, değişik $\mu$ değerleri için $Y\sim Poisson(\mu)$ ve $X\sim Binom(n,p)$ olmak üzere, $p=\mu/n$ alınarak $P(X=1)$ ve $P(Y=1)$ olasılıkları hesaplanarak (değerler dördüncü basamaktan sonra yuvarlatılmıştır) tablo halinde verilmiştir. Tablodaki değerlerden de görüldüğü gibi, $n$ değeri büyüdükçe, $P(X=1)$ Binom olasılıkları $P(Y=1)$ olasılıklarına yaklaşmaktadır.


### Normal - Binom

$p$ çok küçük değilse ve $n$ de büyükse binom dağılımdan yararlanarak olasılıkları hesaplamak güçleşir. $n\rightarrow \infty$ iken binom olasılıkları normal dağılıma yaklaştırılabilir. Bu dağılımın ortalaması ve varyansı, binom dağılımından

$\mu=E(X)=np$

$\sigma^{2}=Var(X)=npq$

olarak hesaplanır. Bu durumda $X\sim N(np,npq)$ olur. Bu nedenle $p$ çok küçük değilse ve $n$ de büyükse binom dağılımına sahip $X$ değişkeninin belli bir değerden küçük ya da büyük olması veya herhangi iki değer arasında yer alma  olasılıkları standart normal dağılım tablosu kullanılarak hesaplanabilir. Fakat Binom dağılımı kesikli ve normal dağılım sürekli olduğundan standart normale dönüştürme yapılırken düzeltme işlemi yapılması gerekir. Bu düzeltme işlemi $\pm0.5$ değeri kullanılarak yapılır.   


<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/pm.png" style="float: center;" width="420" height="230" title="Süreklilik Düzeltmesi" />

<br>

**Örnek:** Bir firmanın ürünleri için yapılan müşteri memnuniyeti araştırması sonuçlarına göre müşterilerin 0.60'ı memnun olduklarını beyan etmişlerdir. Bu firmanın müşterilerinden rasgele 100 müşteri seçildiğinde en az 50 sinin memnuniyet beyan etme olasılıkları kaçtır?


```{r}
p=0.60 
q=1-p
n=100

mu=n*p
var=n*p*q
mu; var
```
<br>
 
```{r}
# P(X>=50)
pnorm(50-0.5,mu,sqrt(var), lower.tail = FALSE)   #-0.5 süreklilik düzeltmesi
```

## Pareto Analizi 

Pareto analizi, kalite iyileştirme çalışmalarında en çok kullanılan tekniklerden biri olup, verileri önem veya öncelik sırasına göre düzenlemeye dayanan bir tekniktir. 

Vilfredo Pareto tarafından ortaya koyulan yöntem, 80/20 kuralı olarak da bilinmektedir. Prensip bulunduğunda, İtalya'daki toprağın %80'ine popülasyonun %20'si sahiptir. Daha sonra, pareto prensibinin hayatın diğer alanlarında da geçerli olduğu keşfedilmiştir. Bu bakımdan pareto analizi için aşağıdaki örnekler verilebilir.

- Proses hatalarının %80'i, proses problemlerinin %20'sinden dolayı oluşur. 
- Şirket gelirinin %80'i, satış elemanlarının %20'si tarafından üretilir.
- Çizelgelemedeki gecikmelerin %80'i, gecikme nedenlerinin %20'sinden kaynaklanır.
- Müşteri şikayetlerinin %80'i, ürün ya da servislerin %20'sinden dolayı oluşur.

Bu örneklerde yer alan tahminler, kaba tahminlerdir. Pareto diyagramları, kalite yönetimi ile ilgili çalışmalarda, en önemli problemleri belirlemede kullanılmaktadır. Bu diyagramlar; en büyük etkiye sahip nedenler üzerine takımın odaklanmasına yardım etmekte ve basit bir görsel formatta problemlerin bağıl önemini göstermektedir. 

Pareto analizine ait aşamalar aşağıdaki gibidir;

- Tüm hata unsurlarının listelenmesi
- Hata unsurlarının miktarlarının (sıklık ve/veya maliyet) belirlenmesi
- Hata unsurlarının **çoktan aza** doğru sıralanması ve verinin özetlenmesi
- Kümülatif dağılımların hesaplanması
- Pareto grafiğinin çizimi
- Pareto eğrisinin çizimi
- Pareto eğrisinin yorumu

Pareto analizinde, verilerin hem **en sık rastlanan** hatalara göre , hem de **en fazla maliyet getiren** hatalara göre yapılması gereklidir. Çok sık rastlanan bir hatanın bize getireceği maddi yük (maliyet) düşük olabileceği gibi, az rastlanan bir hatanın oluşturacağı maliyet yüksek olabilir.

<br>

**Örnek1**
```{r message=FALSE, warning=FALSE}

#install.packages("qcc")

library(qcc)
kusur <- c(27, 789, 9, 65, 12, 109, 30, 15, 45, 621)

names(kusur) <- c("Gürültülü", "Pahalı", "Taze değil",  
                   "Lezzetsiz", "Pers. yetersiz", 
                   "Uzun bekleme", "Temiz değil", "Tuzlu",  
                   "Sunum kötü", "Porsiyon küçük" )

pareto.chart(kusur, ylab="Sıklık",  # y-eksen ismi
             
# grafik rengi              
col=heat.colors(length(kusur)),  
  
# yüzde aralıkları
cumperc = seq(0, 100, by = 20),   
  
# label y right 
ylab2 = "Kümülatif Yüzde",  
  
# grafik ismi 
main = "Farklı Müşteri Şikayetleri" 

)

```

<br>

**Örnek2**
```{r}
defect <- c(80, 27, 66, 94, 33)
names(defect) <- c("price code", "schedule date", "supplier code", "contact num.", "part num.")
pareto.chart(defect, ylab = "Error frequency")
```

**Pareto Öncelik İndeksi (Pareto Priority Index):** Hangi hatanın düzeltilmesine öncelik verilmesi gerektiğini öngörmemizi sağlayan indekstir.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/ppi.png" style="float: center;" width="300" height="60" title="PPI" />

Her bir hata düzeltme faaliyetini bir proje olarak planlamak gerekmektedir. Denklemdeki savings (tasarruf), bu hatayı ortadan kaldırdığımızda elde edilecek parasal tutarı, probability of success (başarı olasılığı), bu projenin başarılı olabilme şansını (0-1 aralığında), cost (proje maliyeti), bu projenin bize getireceği toplam maliyeti ve time of completion (projenin tamamlanma süresi), ay veya yıl olarak projenin ne kadar süre ile planlandığını ifade etmektedir. PPI'da en yüksek değerde olan hata unsurunun düzeltilmesi için bir çalışma başlatılması gerekmektedir.

## Sebep-Sonuç (Cause and Effect) Analizi 

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/fishbone.png" style="float: right;" width="320" height="100" title="Check Sheet" />

Sebep-sonuç diyagramları Kaoru İshikawa tarafından 1943'te geliştirilmiştir. Belirli bir sorunun temel nedenini bulmak için olası nedenleri görselleştirmeye yardımcı olur. Kalite sorunlarını belirlemek, analiz etmek ve iyileştirmek amacıyla kullanılır.  

Balık kılçığı (fishbone) diyagramı olarak da adlandırılan sebep-sonuç diyagramının oluşturulma adımları aşağıdaki gibi özetlenebilir;

- Kalite problemini belirle
- Önemli nedenleri belirle
- Tüm minör nedenleri belirle (beyin fırtınası)
- Diyagram tamamlandığında en olası nedenleri belirlemek için diyagramı değerlendir.
- Çözümler geliştir.

Sebep-sonuç analizinin yararları şunlardır;

- Yöntem, sorunların üzerine giden aktif bir yönetimi geliştirir.
- Diyagramın  hazırlanması iletişimi güçlendirir ve herkesin dikkatinin bir noktaya toplanmasını sağlar. 
- Eğitici bir çalışmadır, herkesin bilgisini geliştirir.
- Verilerin toplanmasını ve probleme bilimsel biçimde yaklaşmayı sağlar.
- Tüm sorunlara uygulanabilir.

İskeletin "başı" genellikle sağda gösterilen problemi veya etkiyi tasvir eder. Farklı nedenleri göstermek için solda "kemikler" uzanır. Kaburgalar, nedenlere ve alt nedenlere ayrılan analiz için nedenlerin kategorilerini veya sınıflandırmasını belirtir. Dallanma, her sınıflandırma altında gerekli olan seviyelere bağlıdır.

<br>

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/Fish1.png" style="float: center;" width="600" height="300" title="Fishbone" />

<br>

Fishbone diyagramı DMAIC sürecinin analiz aşamasında da kullanılmaktadır.

<br>

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/Fish2.png" style="float: center;" width="600" height="300" title="Fishbone" />

<br>

Fishbone diyagramının kullanımı ile;

- Yeni ürün dizaynında ortaya çıkabilecek problemlerin potansiyel nedenleri
- Kalite kusurlarından kaçınma yolları
- Kusura neden olabilecek potansiyel faktörler

tanımlanabilmektedir.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/Fish3.png" style="float: center;" width="600" height="300" title="Fishbone" />

**Örnek1:**
```{r}
library(SixSigma)
effect <- "Flight Time"
causes.gr <- c("Operator", "Environment", "Tools", "Design", 
  "Raw.Material", "Measure.Tool")
causes <- vector(mode = "list", length = length(causes.gr))
causes[1] <- list(c("operator #1", "operator #2", "operator #3"))
causes[2] <- list(c("height", "cleaning"))
causes[3] <- list(c("scissors", "tape"))
causes[4] <- list(c("rotor.length", "rotor.width2", "paperclip"))
causes[5] <- list(c("thickness", "marks"))
causes[6] <- list(c("calibrate", "model"))
ss.ceDiag(effect, causes.gr, causes, sub = "Paper Helicopter Project")
```
<br>

**Örnek2:**
```{r}
b.effect <- "Delay"
b.groups <- c("Personnel", "Weather", "Suppliers", "Planning")
b.causes <- vector(mode = "list", length = length(b.groups))
b.causes[1] <- list(c("Training", "Inadequate"))
b.causes[2] <- list(c("Rain", "Temperature", "Wind")) 
b.causes[3] <- list(c("Materials", "Delays", "Rework"))
b.causes[4] <- list(c("Customer", "Permissions", "Errors"))
ss.ceDiag(b.effect, b.groups, b.causes, sub = "Construction Example")
```


## Kontrol Listeleri

Kontrol listelerinin oluşturulmasının ana amacı; proses kontrolü ve problem çözümü için işletme personeli tarafından dikkatli şekilde ve doğru olarak veri toplanmasının sağlanmasıdır. Kontrol listelerinin yapısı, her bir durum için özelleştirilir ve proje takımı tarafından tasarlanır. Yaratıcılık, bir kontrol listesinin tasarlanmasında büyük rol oynamaktadır.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/check.png" style="float: center;" width="420" height="300" title="Check Sheet" />

Bu kontrol listesi örneğinde, her bir kalite kusuru nedeni ve bu nedenlerin gözlenme sayıları yer almaktadır. Operatör, her üründe gözlemlediği kalite kusurunu, bu listede işaretler ve muayene işlemi tamamlandığında her bir kusur tipi için toplam sayı belirlenir. Kontrol listesinin üst kısmında ise veri toplanan ürüne ve sürece ait bilgiler ile muayeneyi gerçekleştiren operatöre ait bilgiler yer almaktadır. 

Kontrol listeleri, istatistiksel kalite kontrol çalışmaları için temel veriyi sağlamaktadır. Kontrol listelerinin faydaları aşağıdaki şekilde özetlenebilir;

- Veriyi anlamada kolaylık sağlar.
- Gözlem ile oluşturulur, gerçeklerin daha net bir resmini sunmaktadır.
- Verideki desenler hızlı ve net bir şekilde gözlenebilir.

## Serpilme (Scatter) Diyagramı

Serpilme diyagramı, iki değişken arasındaki ilişkinin incelenmesi için kullanılan bir grafik türüdür.

Serpilme diyagramları;

- İki değişkenin ilişkili olduğunu belirten bir hipotezi doğrulamak
- İlişkinin gücünü test etmek için görsel ve istatistiksel bilgi sağlamak

amacıyla kullanılabilir. Serpilme diyagramında iki değişken ilişkili gözlenebilir ancak bu durum değişkenlerin arasında nedensellik olduğu anlamına gelmemektedir.

```{r message=FALSE, warning=FALSE}
library(MSQC)
library(plotly)
data("mech1")
mech1<-as.data.frame(mech1)
head(mech1)
attach(mech1)
s1<-plot_ly(data = mech1, x = ~var1, y = ~var2);s1
```

```{r message=FALSE, warning=FALSE}
s2<-plot_ly(data = mech1, x = ~var1, y = ~var1);s2
```


## Kusur Konsantrasyon Diyagramı

Kusur verileri, yeterli sayıda birim üzerinde bir kusur konsantrasyon diyagramında gösterildiğinde, modeller ortaya çıkar ve bu modellerin konumu genellikle kusurların nedenleri hakkında çok fazla bilgi içerir. Kusur konsantrasyon diyagramı DMAIC sürecinin analiz kısmında oldukça kullanışlıdır. 

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/dcd.png" style="float: center;" width="800" height="400" title="Defect Conc. Diag." />

Bir buzdolabı üretim sürecinin son montaj aşaması için bir kusur konsantrasyon diyagramı görselde yer almaktadır. Yüzey bitirme kusurları, buzdolabındaki koyu gölgeli alanlarla belirlenmiştir. Diyagram incelendiğinde, bu kusurların çoğundan malzeme işlemenin sorumlu olduğu açıkça görülmektedir. Ünite, ortasına bir kayış sabitlenerek hareket ediyor ve bu kayış ya çok gevşek ya da sıkı, yıpranmış, aşındırıcı malzemeden yapılmış ya da çok dar olabilir. Ayrıca ünite hareket ettirildiğinde köşeler zarar görür. İşçi yorgunluğunun olası bir faktör olarak değerlendirilebilir. Her halükarda, uygun çalışma yöntemleri ve iyileştirilmiş malzeme kullanımı bu süreci büyük ölçüde iyileştirecektir.

Benzer şekilde tank problemi için kusur konsantrasyon diyagramı görülmektedir. Hata kategorilerinin farklı harflerle temsil edildiği açıktır.

Kaplama, boyama ve kaplama, döküm ve dökümhane işlemleri, işleme ve elektronik montaj dahil olmak üzere birçok sektörde kusur konsantrasyon diyagramlarının önemli problem çözme araçları olduğu bilinmektedir.

<!--chapter:end:05-İstatistiksel-Kavramlar.Rmd-->

# Değişkenlik ve Kontrol Diyagramlarına Giriş

## Değişkenlik Kavramı ve Kaynakları

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/covid.jpg" style="float: right;" width="300" height="400" title="Variability" />

Her prosesin doğasında var olan değişkenlik, ürünlerden birinin diğerinden farklı olmasına sebep olmaktadır. Esasen değişkenlik kavramı doğanın bir kanunudur ve herhangi bir kategorideki iki doğal maddenin birbirinin tam olarak aynısı olmamasını ifade etmektedir. 

Değişkenlik kilo gibi oldukça büyük ve fark edilebilir olabileceği gibi kar tanelerinin şekilleri gibi çok küçük olabilir. Değişkenlik çok küçük olduğunda öğeler özdeş görünebilir ancak hassas ölçüm aletleri ile farklılık tespit edilebilir. Eğer iki öğe aynı ölçüme sahip olarak görünüyorsa , bu durum ölçüm aletlerinin sınırlarından kaynaklanmaktadır. 

Herhangi bir üretim sürecinde, ne kadar iyi tasarlanmış veya özenle korunmuş olursa olsun, belirli bir miktarda doğal değişkenlik her zaman var olacaktır. Bu doğal değişkenlik veya "arka plan gürültüsü", birçok küçük ve kaçınılmaz nedenin kümülatif etkisidir. Bu değişkenlikler, süreci revize etmekten başka, hakkında çok az şey yapılabilen şans veya rastgele değişkenlikler kategorisine aittir. Bu tür bir değişkenlik, birçoğu önemsiz olan "rastgele" veya "genel" nedenlerin karmaşık bir etkileşiminin çok sayıda etkisinin toplamıdır. 

Rastgele değişkenlik tek başına mevcut olduğunda, nedenlerinin izini sürmek mümkün olmayacaktır. Örneğin, ürünlerin kalitesinde değişkenliğe neden olan yaygın nedenler kümesi, proses girdilerinde rastgele farklılıklar içerebilir: atmosferik basınç veya sıcaklık değişiklikleri, trafik veya ekipman titreşimleri, elektrik veya nem dalgalanmaları ve operatörün fiziksel ve duygusal koşulları. Bu, bir madeni paranın atıldığında tura veya tura gelmesine neden olan kuvvetler kümesine benzer. Diğer bir deyişle, _tesadüfi nedenler sürecin içsel bir parçasıdır._ Bir süreçte değişkenliklerin yalnızca genel nedenleri mevcut olduğunda, sürecin "istikrarlı", "istatistiksel kontrolde" veya "kontrolde (**in control**)" olduğu kabul edilir.


Büyüklüğü görece büyük olan ve kolayca tanımlanan değişkenlik nedenleri, "atanabilir (assignable)" veya "özel" nedenler olarak sınıflandırılır.Temel kalite özelliklerindeki bu değişkenlik genellikle üç kaynaktan ortaya çıkar: 

- yanlış ayarlanmış veya kontrol edilen makineler,
- operatör hataları 
- kusurlu hammadde 

Bu tür bir değişkenlik, arka plan gürültüsüyle karşılaştırıldığında genellikle büyüktür ve genellikle kabul edilemez bir işlem performansı düzeyini temsil eder. Özel değişkenlik nedenleri mevcut olduğunda, değişkenlik aşırı olacaktır ve süreç "istikrarsız", "istatistiksel kontrol dışı" veya beklenen rastgele değişkenliğin ötesinde olarak sınıflandırılır. Kısaca "kontrol dışı (**out of control**)" olarak yazılır.

Özel nedenler arasında, doğal olarak kararlı olduğunda prosesin kurcalanması veya gereksiz şekilde ayarlanması gibi yapısal değişiklikler yer alır.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/vva.png" style="float: center;" width="700" height="450" title="Variability" />

- Genel neden değişkenliği; sürecin doğası

- Özel neden değişkenliği; gerçek değişiklikler 

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/causes.png" style="float: center;" width="500" height="450" title="Causes" />

Değişkenlik; ekipman, malzeme, ortam, ve operatör kaynaklı olarak her proseste mevcuttur. Bir üretim prosesinde mevcut olabilecek değişkenlik kaynakları aşağıdaki görselde sunulmuştur.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/varkay.png" style="float: center;" width="600" height="270" title="Değişkenlik Kaynakları" />

Değişkenlik genel ve özel nedenlerden kaynaklanabilir. İstatistiksel kalite kontrolde , yalnız genel nedenlerden kaynaklı bir değişkenlik söz konusu ise prosesin istatistiksel olarak kontrol altında olduğu söylenebilir. Bu durumda proses stabildir ve tahmin edilebilir niteliktedir.

Bir ürün müşteri beklentilerini karşılayacak veya aşacaksa, genellikle istikrarlı veya tekrarlanabilir bir işlemle üretilmelidir. Proses, ürünün kalite özelliklerinin hedef veya nominal boyutları etrafında çok az değişkenlikle üretilebilmelidir. SPC, değişkenliğin azaltılması yoluyla süreç kararlılığının sağlanmasında ve kapasitenin iyileştirilmesinde yararlı olan güçlü bir problem çözme araçları bütünüdür.

### Doğruluk ve Hassasiyet

Ölçülebilen özellikler yoluyla proses değişkenliğinin ölçümünde bir prosesin **doğruluğu (accuracy)** ve **hassasiyeti (precision)** arasındaki fark genellikle yanlış anlaşılmaktadır. Aradaki fark aşağıda açıklanmaktadır;

- Bir prosesin **doğruluğu** hedeflenen değeri bulma yeteneğine aittir.
- Bir prosesin **hassasiyeti**, değerlerin yayılma derecesine aittir.
- Hassasiyet ve doğruluk arasındaki bu ayrım, sonuçlara veya değerlere tek tek değil, sadece grup olarak bakıldığında anlaşılabilir.
- Prosesin doğruluğu ve hassasiyeti hakkında bilgi eksikliğinden dolayı tek bir sonucu temel alarak proses ayarı konusunda karar vermek istenmeyen sonuçları ortaya çıkarabilir.
- Proses hassasiyetinin yokluğunu düzeltmek üzere ayar yapmak, yayılmayı düzeltmek için gereken araştırmayı yapmaktan genellikle daha kolaydır.


<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/vari.png" style="float: center;" width="600" height="600" title="Variability" />

Şekilde görülen dağılımlara göre;

**Proses 1** -  **hassastır** (değişkenlik azdır) fakat merkezlenme hedef değer olmadığından _doğru_ değildir.

**Proses 2** - **doğrudur** fakat _hassas_ değildir, dağılımda değişkenlik çok fazladır.

**Proses 3** - hem doğru değildir hem de hassas değildir.

**Proses 4** - hem **doğru** hem de **hassas** bir dağılım sergilemektedir.



## Kontrol Diyagramlarına Giriş

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/tms.jpg" style="float: right;" width="250" height="300" title="The Magnificent Seven" />


SPC, yirminci yüzyılın en büyük teknolojik gelişmelerinden biridir, çünkü sağlam temel ilkelere dayanır, kullanımı kolaydır, önemli bir etkiye sahiptir ve herhangi bir sürece uygulanabilir. Bu bakımdan SPC'nin yedi temel aracı (**the magnificent seven**)

1. Histogram veya dal-yaprak grafiği
2. Kontrol listeleri
3. Pareto diyagramı
4. Sebep-sonuç diyagramı
5. Kusur konsantrasyon diyagramı
6. Serpilme diyagramı
7. Kontrol grafiği

olarak tanımlanmıştır. Yedi araçtan Shewhart kontrol grafiği muhtemelen teknik olarak en karmaşık olanıdır. 1920'lerde Bell Telefon Laboratuvarlarında Walter A. Shewhart tarafından geliştirilmiştir.

Bir proseste mevcut olan değişkenliğin genel veya özel nedenlerden kaynaklı olma durumu kontrol diyagramları yardımı ile analiz edilmektedir.

Kontrol diyagramları; arzu edilen niteliklerde ürün veya hizmet üretebilmek için prosesin istatistiksel olarak kontrol ve analiz edilmesinde kullanılmaktadır.

DMAIC sürecinin analiz ve kontrol aşamalarında kullanılan bir araçtır.

Bu diyagramlar proseste bir sorunun var olup olmadığını ortaya koymakta, sorun hakkında ipuçları vermekte ancak sorunun nedenini göstermemektedir.

Kalite özelliğine, ölçülecek veri tipine ve kullanım amacına göre istatistiksel kalite kontrolde çok sayıda farklı kontrol diyagramı kullanılmaktadır.

İstatistiksel proses kontrolünün temel bir amacı, birçok uygun olmayan birim üretilmeden önce sürecin araştırılması ve düzeltici eylemin gerçekleştirilebilmesi için süreç kaymalarının özel nedenlerinin oluşumunu hızlı bir şekilde tespit etmektir.

Son olarak, istatistiksel süreç kontrolünün nihai amacının süreçteki değişkenliği ortadan kaldırmak olduğu unutulmamalıdır. Değişkenliği tamamen ortadan kaldırmak mümkün olmayabilir, ancak kontrol diyagramı, değişkenliği olabildiğince azaltmada etkili bir araçtır.

Kalite kontrol diyagramının seçimi ilk olarak toplanan veri tipinin sürekli ya da kesikli olmasına göre farklılık göstermektedir. Diyagram seçimindeki ilerleyen adımları aşağıdaki tablodan inceleyebilirsiniz. 

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/contc.png" style="float: center;" width="700" height="400" title="CC" />

Tabloda yer alan kontrol diyagramları dışında sürekli veri tipinde daha hassas analizler için kullanılan **EWMA (Üstel Ağırlıklandırılmış Hareketli Ortalamalar)** ve **CUSUM (Kümülatif Toplam)** gibi farklı kontrol diyagramları da söz konusudur. 

Kalite kontrol diyagramları, diyagram türünden bağımsız olarak 

- üst kontrol limit (Upper Control Limit; UCL), 
- merkez çizgisi (Center Line; CL) ve 
- alt kontrol limitinden (Lower Control Limit; LCL) 

oluşmaktadır. Kontrol limitleri merkez çizgisinin $\pm3 \sigma$ uzaklığında olmaktadır. Merkez çizgisi ise kalite diyagramına bağlı olarak incelenecek kalite özelliğinin ortalamasına eşittir.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/cc1.png" style="float: center;" width="500" height="400" title="CC" />

$UCL=CL+3\sigma$

$LCL=CL-3\sigma$

Bu kontrol limitleri, eğer proses kontrol altında ise, numune noktalarının neredeyse tamamı bunların arasına düşecek şekilde seçilir. Noktalar kontrol sınırları içinde kaldığı sürece, işlemin kontrol altında olduğu varsayılır ve herhangi bir işlem yapılması gerekmez. 

Bununla birlikte, kontrol sınırlarının dışında kalan bir nokta, sürecin kontrol dışı olduğunun kanıtı olarak yorumlanır ve değişkenliğin özel nedeni olduğunu ifade eder.Bu problem ile ilgili sorumlu atanabilir, nedeni veya nedenleri bulmak ve ortadan kaldırmak için araştırma ve düzeltici eylem gereklidir. 

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/cc4.png" style="float: center;" width="500" height="250" title="CC" />

Tüm noktalar kontrol limitleri içinde çizilse bile, sistematik veya rastgele olmayan bir şekilde davranıyorlarsa, bu sürecin kontrol dışı olduğunun bir göstergesi olabilir. Örneğin, son 20 noktanın 18'i merkez çizgisinin üzerinde ancak üst kontrol sınırının altında çizilirse ve bu noktalardan yalnızca ikisi merkez çizgisinin altında ancak alt kontrol sınırının üzerinde çizilirse, bir şeylerin ters gittiği düşünülebilir. 

Süreç kontrol altındaysa, çizilen tüm noktalar esasen rastgele bir modele sahip olmalıdır. Genellikle, belirli bir rastgele olmayan modelin bir kontrol çizelgesinde görünmesinin bir nedeni vardır ve bulunup ortadan kaldırılabilirse, süreç performansı iyileştirilebilir.


Kontrol çizelgeleri ile hipotez testi arasında yakın bir bağlantı vardır. Bir anlamda, kontrol çizelgesi, sürecin istatistiksel bir kontrol durumunda olduğu hipotezinin bir testidir. Kontrol sınırları dahilinde bir nokta çizimi, istatistiksel kontrol hipotezini reddedememeye eşdeğerdir ve kontrol limitlerinin dışında kalan bir nokta, istatistiksel kontrol hipotezini reddetmeye eşdeğerdir.
 

Bir kontrol şeması örneğini inceleyecek olursak; yarı iletken imalatında, ışığa duyarlı bir fotorezist malzemenin silikon levhaya uygulandığı fotolitografidir, devre modeli tipik olarak yüksek yoğunluklu UV ışığı kullanılarak dirence maruz bırakılır ve istenmeyen direnç malzemesi, gelişen bir süreçle kaldırılır. Direnç modeli tanımlandıktan sonra, alttaki malzeme ıslak kimyasal veya plazma aşındırma ile çıkarılır. Aşındırma direncini artırmak için geliştirmeyi sert pişirme işlemi ile takip etmek önemlidir.

Sert pişirmede önemli bir kalite özelliği, direncin **akış genişliğidir**, pişirme işlemi nedeniyle ne kadar genişlediğinin bir ölçüsüdür. **Her saat, beş plaka örneği alınır**, ortalama akış genişliği hesaplanır ve grafiği çizilir. Çizilen tüm noktaların kontrol limitlerinin içinde olduğuna dikkat edin, bu nedenle grafik, sürecin istatistiksel kontrolde kabul edildiğini gösterir.

Aşağıdaki örnek için akış genişliğinin ortalama 1.5 mikronda kontrol edilebileceğini ve akış genişliğinin standart sapmasının 0.15 mikron olduğu bilindiğini varsayalım. 

```{r}
CL=1.5
sigma=0.15
n=5

sigma.x=sigma/sqrt(n); sigma.x

sigma.x<-round(sigma.x,4); sigma.x
```
<br>

Örneklem standart hatasını elde ettikten sonra alt ve üst sınırları elde etmek mümkündür.

```{r}
UCL=CL+3*sigma.x
LCL=CL-3*sigma.x

UCL; LCL
```

Bu yapı $3\sigma$ kontrol limitleri olarak adlandırılır. Benzer şekilde bu yapıda test ettiğimiz hipotez;

$\mu=1.5$

$\mu\neq1.5$

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/cc2.png" style="float: center;" width="500" height="400" title="CC" />

Esasen burada alt ve üst sınırların hesabı güven aralıkları yaklaşımından doğmaktadır.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/ci.png" style="float: center;" width="600" height="100" title="CC" />

$1.5-Z_{\alpha/2}(0.0671)$

$1.5+Z_{\alpha/2}(0.0671)$

burada $Z_{\alpha/2}$ değeri 3 seçildiğinde eşitlik LCL ve UCL halini almaktadır.

<br>

Kontrol diyagramlarının avantajlarından bahsetmek gerekirse;

- Verimliliği artırmak için kanıtlanmış bir tekniktir.

- Kusurların önlenmesinde etkilidir.

- Gereksiz süreç ayarlamasını önler.

- Süreç kapasitesi hakkında bilgi sağlar.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/cc3.png" style="float: center;" width="650" height="400" title="CC" />

### Kontrol Limitlerinin Seçimi

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/errors.png" style="float: right;" width="350" height="300" title="Error Types" />

Kontrol limitlerinin belirlenmesi, bir kontrol diyagramı tasarlanırken verilmesi gereken kritik kararlardan biridir. Bu karara bağlı olarak Tip 1 ve Tip 2 hata olasılıklarında artış veya azalış meydana gelebilir.

**Tip 1 Hata ($\alpha$):** Gerçekte doğru olan yokluk hipotezini reddetme olasılığı

**Tip 2 Hata ($\beta$):** Gerçekte yanlış olan yokluk hipotezini kabul olasılığı

Kontrol sınırlarını merkez hattından daha uzağa taşımak, Tip I hata riskini azaltırken aynı zamanda Tip II hata (süreç gerçekten kontrolden çıktığında kontrol limitleri arasına düşme riski) riskini artıracaktır.

Kontrol limitlerini merkez hattına yaklaştırmak, ters etkiye neden olup; Tip I hata riskini artırırken Tip II hata riski azaltacaktır.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/normali.png" style="float: center;" width="600" height="300" title="CC" />



<!--chapter:end:06-Değişkenlik-ve-Kontrol-Diyagramlarına-Giriş.Rmd-->

# Ölçülebilir Değişkenler için Kontrol Diyagramları

## Tekil Ölçümler için I ve MR (Individual-Moving Range) Kontrol Diyagramları

I ve MR (hareket aralığı) diyagramları, ölçülebilir değişkenler için verinin tekil gözlemler halinde toplandığı durumlarda kullanılmaktadır. Bu durumların bazı örnekleri aşağıdaki gibidir:

- Veriler nispeten yavaş bir şekilde elde edilir ve analizden önce $n>1$ örnek boyutlarının birikmesine izin vermek zahmetlidir. Gözlemler arasındaki uzun aralık, alt gruplamayla ilgili sorunlara neden olacaktır. Bu, hem imalat hem de imalat dışı durumlarda sıklıkla meydana gelir.

Tekil ölçümler için kontrol diyagramlarının birçok uygulamasında, işlem değişkenliğini tahmin etmenin temeli olarak iki ardışık gözlem hareket aralığını kullanırız. Hareket aralığı şu şekilde tanımlanır:

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/mri.png" style="float: center;" width="600" height="100" title="Factor Table" />


**I kontrol diyagramında**, LCL, CL ve UCL aşağıdaki formüller kullanılarak hesaplanabilir.

$UCL_{I}=\bar{I}+3(\overline{MR}/d_{2})$

$CL_{I}=\bar{I}$

$LCL_{I}=\bar{I}-3(\overline{MR}/d_{2})$


------

**Not1:** Burada $\sigma$'nın yansız tahmin edicisi olarak 

$\hat{\sigma}=\frac{\bar{R}}{d_{2}}$

kullanılmaktadır. Gözlem sayısının 10'dan az olduğu durumlarda oldukça iyi çalışan eşitlik, gözlem sayısı arttıkça etkinliğini yitirmektedir. Eşitlikte; 

$W=\frac{R}{\sigma}$ ve $E(W)=d_{2}$ 

temsil etmektedir.

-------

Kontrol limitleri hesabı için gereken $d_{2}$ değeri, kontrol limitleri faktör tablosu kullanılarak elde edilecektir. Tabloda `n` her örneklemede prosesden muayene edilmek üzere alınan örnek sayısını temsil etmektedir. I ve MR grafikleri için `n=2` seçilir. (Faktör tablosunun detaylı haline `Ekler` kısmından ulaşabilirsiniz.)

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/factable.png" style="float: center;" width="500" height="300" title="Factor Table" />

<br>

**MR kontrol diyagramında ise**, LCL, CL ve UCL aşağıdaki formüller yardımı ile hesaplanabilir.

$UCL_{MR}=D_{4}\overline{MR}$

$CL_{MR}=\overline{MR}$

$LCL_{MR}=D_{3}\overline{MR}$

------

**Not2:** Teoride $D_{3}$ ve $D_{4}$ değerleri $d_{2}$ ve $d_{3}$ değerleri üzerinden elde edilmektedir.

$D_{3}=1-3\frac{d_{3}}{d_{2}}$

$D_{4}=1+3\frac{d_{3}}{d_{2}}$

Eşitliklerde;

$W=\frac{R}{\sigma}$ ve $\sigma_{W}=d_{3}$

temsil etmektedir.

-------

Bu eşitliklerde $D_{3}$ ve $D_{4}$ değerleri kontrol limitleri faktör tablosu kullanılarak elde edilecektir.

<br>


**Örnek 1:** Ambalaj endüstrisinde, oluklu mukavva üretiminde sıvı nişasta kullanılmaktadır. Nişastanın sıcaklığı sürekli olarak kontrol edilmiş 15 dk. aralıklarla değer kaydedilmiştir. 

```{r echo=FALSE}
library(DT)
Time=c("08:00","08:15","08:30","08:45","09:00","09:15","09:30","09:45","10:00","10:15","10:30","10:45","11:00","11:15","11:30","11:45","12:00","12:15","12:30","12:45")
Degree=c(27.2,27.6,26.8,27.2,27.1,26.6,27.6,27.7,27.5,26.6,27.2,26.7,25.9,27.1,27.6,27.5,28.3,26.5,29,27.2)
data=data.frame(Time,Degree)


DT::datatable(data,options = list(
            columnDefs = list(list(className = 'dt-center', targets = 0:2))
            ))

# data %>%
#   kbl() %>%
#   kable_styling(full_width = FALSE)
```

<br>

I ve MR kontrol diyagramlarının kontrol limitlerinin hesaplanabilmesi için ilk olarak gözlemlere ait hareket aralığı $(MR)$ değerlerinin ve bu değerlerin ortalamamasının $(\overline{MR})$ hesaplanması gerekmektedir. $MR$ değerleri iki ardıl gözlemin farkının mutlak değeri alınarak hesaplanabilir.

```{r}
MR=c()
for(i in 1:20){
  MR[i]=abs(Degree[i]-Degree[i-1])
}

MR  

m.MR=mean(MR[-1]); m.MR   # NA olan ilk gozlemi cikar, ortalama hesapla 
```

<br>

I kontrol diyagramında kontrol limitlerinin hesaplanması için gereken diğer bir değer, gözlem değerlerinin aritmetik ortalamasıdır. Bu değer, şu şekilde hesaplanabilir.


```{r}
m.I=mean(Degree); m.I
```

<br>

I diyagramının oluşturulabilmesi için gerekli son değer; $d_{2}$ faktör değeridir. Bu değer $n=2$ için faktör tablosundan $d_{2}=1.128$ olarak bulunur.

Bu değerler LCL, CL ve UCL eşitliklerinde yerlerine konularak kontrol limitleri hesaplanabilir. 

```{r}
d2=1.128
UCL.I=m.I+3*(m.MR/d2)
UCL.I
```
<br>

```{r}
CL.I=m.I
CL.I
```
<br>

```{r}
LCL.I=m.I-3*(m.MR/d2)
LCL.I
```

<br>

Sınırlar manuel olarak hesaplanıp kontrol grafiği `plot()` ve `abline()` ile çizilebileceği gibi hazır paketlerden de yararlanılabilir. Bu paketlere örnek olarak `qicharts2` ve `ggQC` verilebilir.

<br>

```{r message=FALSE, warning=FALSE}
library(qicharts2)
# I

chartI<-qic(Degree, chart = 'i',decimals=3); chartI

```
<br>

```{r}
D4=3.267
UCL.MR=D4*m.MR
UCL.MR
```

<br>

```{r}
CL.MR=m.MR
CL.MR
```

<br>

```{r}
D3=0
LCL.MR=D3*m.MR
LCL.MR
```
<br>

```{r}
# MR
chartMR<-qic(Degree, chart = 'mr',decimals=3); chartMR
```

<br>

Kalite karakteristiğinin **normallik varsayımı** diyagramın hassasiyeti noktasında önem taşımaktadır. Analiz edilen veri setinin dağılımı incelenmeli ve normallik sağlanmıyorsa ilgili dönüşüm yapılarak inceleme sürecine devam edilmelidir. Özellikle I ve MR diyagramları normallikten sapmalara oldukça duyarlıdır.


<br>

**Örnek 2:** Bir bankanın ipotek kredisi işleme birimi, kredi başvurularının işleme alınma maliyetlerini izler. İzlenen miktar, toplam haftalık maliyetlerin hafta boyunca işlenen kredi sayısına bölünmesiyle elde edilen ortalama haftalık işlem maliyetleridir. Son 20 haftanın işlem maliyetleri Tablo 6.6'da gösterilmektedir. Bu veriler için I (bireysel) ve MR (hareketli aralık) kontrol diyagramlarını çiziniz.


```{r echo=FALSE}
cost<-c(310,288,297,298,307,303,294,297,308,306,294,299,297,299,314,295,293,306,301,304)
MR<-c(NA,22,9,1,9,4,9,3,11,2,12,5,2,2,15,19,2,13,5,3)

data2=data.frame(cost,MR)

DT::datatable(data2,options = list(
            columnDefs = list(list(className = 'dt-center', targets = 0:2))
            ))

```


```{r}
# I

library(qicharts2)
cI<-qic(cost, chart = 'i',decimals=3); cI
```
<br>


```{r}
# MR

cMR<-qic(cost, chart = 'mr',decimals=3); cMR
```

```{r}
# normallik kontrol

qqnorm(cost)
qqline(cost, col = "steelblue", lwd = 2)
```

<br>

```{r}
# log donusum normallik kontrol 

z<-log(cost)
qqnorm(z)       
qqline((z), col = "steelblue", lwd = 2)
```

<br>

```{r}
library(qicharts2)
cI.z<-qic(z, chart = 'i',decimals=3); cI.z        # I log donusum
```

<br>

```{r}
cMR.z<-qic(z, chart = 'mr',decimals=3); cMR.z     # MR log donusum 
```
<br>

cost değişkenini farklı kontrol limitlerinde gözlemlemek de mümkündür. I kontrol diyagramının $\pm1\sigma$, $\pm2\sigma$ ve $\pm3\sigma$ versiyonlarının aynı diyagram üzerinde gözlenen hali aşağıda yer almaktadır.

```{r echo=FALSE, message=FALSE, warning=FALSE}
library(ggplot2)
library(ggQC)


### Data

run.n<-1:20
data2=data.frame(run.n,cost,MR)

### Make the plot
XmR_Plot <-
  ggplot(data2, aes(x = run.n, y = cost)) + #init ggplot
  geom_point() + geom_line() + # add the points and lines
  stat_QC(method = "XmR",      # specify QC charting method
          auto.label = T,      # Use Autolabels
          label.digits = 2,    # Use two digit in the label
          show.1n2.sigma = T   # Show 1 and two sigma lines
  ) +
  scale_x_continuous(expand =  expand_scale(mult = .15))  # Pad the x-axis

XmR_Plot

```

<br>

Benzer şekilde farklı varyasyonları aynı diyagram üzerinde değil ayrı ayrı ve yan yana kıyaslama imkanı gözlem açısından faydalı olacaktır.

```{r echo=FALSE, message=FALSE, warning=FALSE}
QC_Violations <-
  ggplot(data2, aes(x = run.n, y = cost)) + #init ggplot
  stat_qc_violations(method = "XmR"
                     ,show.facets = c(2,3,4)
  )
QC_Violations
```

## X-R Kontrol Diyagramları

İlgilenilen kalite karakteristiğinin $\mu$ ortalama ve $\sigma$ standart sapma ile normal dağıldığı varsayılmaktadır. 

Uygulamada $\mu$ ve $\sigma$ bilinememektedir. Bu nedenle, sürecin kontrol altında olup olmadığı alınan ön numunelerin veya alt grupların tahmin sonuçlarına bağlı olarak değerlendirilir. Bu değerlendirme için en az 20-25 örneklem çekilmelidir. $m$ örnek çekildiği ve her birinin $n$ gözlem içerdiği varsayılsın, $n$ genellikle 4, 5 veya 6 gözlem içerecektir. Küçük n değerinin nedeni genellikle prosesde meydana gelen örnekleme maliyeti ve zaman kaybıdır.

Burada $x_{1},x_{2},...,x_{n}$ ise $n$ büyüklüğünde örneklem ise bu örneklemin ortalaması;

$\bar{x}=(x_{1}+x_{2}+...+x_{n})/n$

$\bar{x}_{1},\bar{x}_{2},...,\bar{x}_{m}$ her bir örneklemin ortalaması olmak üzere $\mu$'nün en iyi tahmin edicisi proses ortalaması;

$\bar{\bar{x}}=(\bar{x}_{1}+\bar{x}_{2}+...+\bar{x}_{m})/m$


Böylece, $\bar{\bar{x}}$, $\bar{x}$ diyagramı için CL olarak kullanılabilir.

Kontrol limitlerinin elde edilmesi için $\sigma$'nın tahminine ihtiyaç duyulur ve bu bakımdan range bilgisinden yararlanılır. 

$R=x_{max}-x_{min}$

m örneklem için $R_{1},R_{2},...,R_{m}$ elde edilir. Buradan ortalama range değeri;

$\bar{R}=(R_{1}+R_{2}+...+R_{m})/m$

elde edilir.

<br>


**$\bar{x}$ kontrol diyagramı** için LCL, CL ve UCL aşağıdaki formüller yardımı ile hesaplanabilir.


$UCL=\bar{\bar{x}}+A_{2}\bar{R}$

$CL=\bar{\bar{x}}$

$LCL=\bar{\bar{x}}-A_{2}\bar{R}$

-------

**Not3:** Teoride $A_{2}$ değeri $d_{2}$ üzerinden elde edilmektedir.

$A_{2}=\frac{3}{d_{2}\sqrt{n}}$

--------

<br>

**$R$ kontrol diyagramı** için LCL, CL ve UCL aşağıdaki formüller yardımı ile hesaplanabilir.

$UCL=D_{4}\bar{R}$

$CL=\bar{R}$

$LCL=D_{3}\bar{R}$

<br>

Proses standart sapması için yansız tahmin edici;

$\hat{\sigma}=\frac{\bar{R}}{d_{2}}$

olarak hesaplanır.

**$\bar{x}$ ve $R$ Diyagramlar Evre I (Phase I):** Kontrol diyagramı kullanımında, $\bar{x}$ ve $R$ kontrol diyagramları oluşturmak için ön numuneler kullanıldığında, yukarıdaki eşitlikler yardımı ile elde edilen kontrol sınırlarının deneme kontrol sınırları olarak ele alınması gerekir. İlk numunelerın seçilerek prosesin kontrol altında olup olmadığının incelendiği bu evre I. evre olarak adlandırılır. 

Tüm noktalar kontrol sınırları içinde işaretlenirse ve sistematik bir davranış yoksa, sürecin geçmişte kontrol altında olduğu ve deneme kontrol limitlerinin mevcut veya gelecekteki üretimi kontrol etmek için uygun olduğu sonucuna varılır. Deneme kontrol limitlerini hesaplamak için 20-25 numuneye veya n boyutunda (tipik olarak 3 ile 5 arası) alt gruba sahip olması istenir. Elbette daha az veriyle çalışılabilir ancak kontrol sınırlarının güvenilirliği dikkate alınmalıdır.

Deneme kontrol limitleri ile karşılaştırıldığında $\bar{x}$ veya $R$ değerlerinden birinin veya daha fazlasının kontrol dışı olduğunu varsayalım. Açıktır ki, mevcut veya gelecekteki üretim için kontrol sınırları anlamlı olacaksa, bunlar kontrol altında olan bir süreçten gelen verilere dayanmalıdır. Bu nedenle, geçmiş kontrol hipotezi reddedildiğinde, deneme kontrol limitlerinin revize edilmesi gerekir.

Bu aşamada kontrol dışı noktaların her biri incelenerek, özel değişkenliğin nedeni araştırılır. Özel bir neden bulunursa, nokta atılır ve deneme kontrol sınırları yalnızca kalan noktalar kullanılarak yeniden hesaplanır. Daha sonra bu kalan noktalar kontrol için yeniden incelenir. (Başlangıçta kontrol altında olan noktaların artık kontrolden çıkmış olabileceğini unutmayın, çünkü yeni deneme kontrol limitleri genellikle eskilere göre daha dar olacaktır.) Bu süreç, tüm noktalar kontrol altına alınana kadar sürdürülür.

Bazı durumlarda, kontrolden çıkan bir nokta için özel bir neden bulmak mümkün olmayabilir. Bu noktada uygulanabilecek iki yaklaşım mevcuttur. Bunlardan ilki, sanki özel bir neden bulunmuş gibi noktayı ortadan kaldırmaktır. Bu eylemi seçmek için analitik bir gerekçe yoktur, bunun dışında, kontrol sınırları dışında kalan noktaların, kontrol dışı bir durumun olasılık dağılım özelliğinden alınmış olması muhtemeldir. Alternatif yaklaşım ise noktayı (veya noktaları) korumaktır. Elbette, nokta gerçekten kontrol dışı bir durumu temsil ediyorsa, ortaya çıkan kontrol sınırları çok geniş olacaktır. Ancak, bu tür yalnızca bir veya iki nokta varsa, bu, kontrol grafiğini önemli ölçüde bozmayacaktır. Gelecekteki numuneler hala kontrolü gösteriyorsa, açıklanamayan noktalar muhtemelen güvenli bir şekilde bırakılabilir.

Bazı durumlarda, $\bar{x}$ ve $R$ diyagramları için ilk örnek değerleri deneme kontrol sınırlarına göre işaretlendiğinde, birçok nokta kontrol dışı kalacaktır. Açıktır ki, kontrol dışı noktalar keyfi olarak analiz dışı bırakılırsa güvenilir kontrol limitlerinin yeniden hesaplayabileceği çok az veri kalacaktır.

Ayrıca, bu yaklaşım ile verideki yararlı bilgilerin göz ardı edilmesi de söz konusudur. Öte yandan, her bir kontrol dışı nokta için özel bir neden aramak da sürdürülebilir bir teknik olmayacaktır. Bu bakımdan kontrol limitleri dışında kalan veriler için ortaya çıkan desen ile ilgilenmek ve bu yapıyı belirlemek kullanışlı olmaktadır. Kontrol dışı noktaların modeliyle ilişkili özel nedenin belirlenmesi oldukça kolaydır ve bu sorununun ortadan kaldırılması genellikle büyük bir süreç iyileştirmesi ile sonuçlanmaktadır.


**Revize (LCL, UCL ve CL): ** Herhangi bir kontrol diyagramının etkin kullanımı, kontrol limitlerinin ve merkez hatlarının periyodik olarak revize edilmesini gerektirecektir. Bazı uygulayıcılar, her hafta, her ay veya her 25, 50 veya 100 numunede bir gibi kontrol tablosu limitlerinin gözden geçirilmesi ve revizyonu için düzenli periyotlar belirler. Kontrol limitlerini gözden geçirirken, kontrol limitlerinin hesaplanmasında en az 25 örnek veya alt grup (bazı otoriteler 200-300 ayrı gözlem önermektedir) kullanılmasının oldukça arzu edildiğini unutmayın.



**$\bar{x}$ ve $R$ Diyagramlar Evre II (Phase II):** Bir dizi güvenilir kontrol limiti oluşturulduktan sonra, gelecekteki üretimi izlemek için kontrol diyagramını kullanılır, bu aşama evre II olarak adlandırılır.





**Örnek 1:** Bir makine parçası üretiminde kama mili derinliği (mm) ile ilgili elde edilen ölçüm sonuçlarını içermektedir. Ölçümler, farklı zamanlarda üretilen 25 partiden 4 örnek alınarak gerçekleştirilmiştir. X-R kontrol diyagramını çizerek, prosesin istatistiksel olarak kontrol altında olup olmadığını analiz ediniz.

```{r echo=FALSE}
library(DT)
alt_gr_no<-1:25

tarih<-c(rep("26 Aralık",5),rep("27 Aralık",5),rep("28 Aralık",5),rep("29 Aralık",5),rep("30 Aralık",5))

zaman<-c("08:50","11:30","01:45","03:45","04:20","08:35","09:00","09:40","01:30","02:50","08:30","01:35","02:25","02:35","03:55","08:25","09:25","11:00","02:35","03:15","09:35","10:20","11:35","02:00","04:25")
  
t1<-c(6.35,6.46,6.34,6.69,6.38,6.42,6.44,6.33,6.48,6.47,6.38,6.37,6.4,6.38,6.5,6.33,6.41,6.38,6.35,6.56,6.38,6.39,6.42,6.43,6.39)
  
t2<-c(6.4,6.37,6.4,6.64,6.34,6.41,6.41,6.41,6.44,6.43,6.41,6.37,6.38,6.39,6.42,6.35,6.4,6.44,6.41,6.55,6.4,6.42,6.39,6.36,6.38)
  
t3<-c(6.32,6.36,6.34,6.68,6.44,6.43,6.41,6.38,6.47,6.36,6.39,6.41,6.47,6.45,6.43,6.29,6.29,6.28,6.37,6.45,6.45,6.35,6.39,6.35,6.43)
  
t4<-c(6.37,6.41,6.36,6.59,6.4,6.34,6.46,6.36,6.45,6.42,6.38,6.37,6.35,6.42,6.45,6.39,6.34,6.58,6.38,6.48,6.37,6.4,6.36,6.38,6.44)
  
data=data.frame(alt_gr_no,tarih,zaman,t1,t2,t3,t4)

DT::datatable(data,options = list(
            columnDefs = list(list(className = 'dt-center', targets = 0:7))
            ))
  
  
```
<br>

Kontrol diyagramı için hesaplanması gereken değerlerden ilki $\bar{\bar{x}}$,

```{r}
xs<-data[,4:7]
rmeans<-rowMeans(xs); rmeans

m.x<-mean(rmeans); m.x
```

<br>

İhtiyaç duyulacak diğer bir değer $\bar{R}$

```{r}
R<-c()
for (i in 1:25){
  R[i]=max(xs[i,])-min(xs[i,])}
  m.R<-mean(R); m.R

```
<br>

X kontrol diyagramı için CL, UCL ve LCL;

```{r}
CL.x<-m.x
CL.x
```

<br>

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/factable.png" style="float: center;" width="500" height="300" title="Factor Table" />

```{r}
A2=0.729
UCL.x<-m.x+A2*m.R
UCL.x
```

<br>

```{r}
LCL.x<-m.x-A2*m.R
LCL.x
```
 
<br>

R kontrol diyagramı için CL, UCL ve LCL;

```{r}
CL.R<-m.R
CL.R
```
<br>


<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/factable.png" style="float: center;" width="500" height="300" title="Factor Table" />

```{r}
D4=2.282
UCL.R<-D4*m.R
UCL.R
```

<br>

```{r}
D3=0
LCL.R<-D3*m.R
LCL.R
```
<br>

**Mil Derinliği $\bar{X}$ Kontrol Diyagramı**

```{r message=FALSE, warning=FALSE}
library(qcc)
qcc(xs, type="xbar")
```

$\bar{X}$ diyagramı incelendiğinde; 4, 16 ve 20 numaralı alt grupların kontrol dışı olduğu gözlenmektedir. Prosesin istatistiksel olarak kontrol altında olmadığı ve varyasyonun özel bir nedeninin olduğu sonucuna varılmaktadır. Bu noktada varyasyona neden olan faktörler incelenerek ortadan kaldırılmalıdır. 


<br>

**Mil Derinliği $R$ Kontrol Diyagramı**
```{r message=FALSE, warning=FALSE}

qcc(xs, type="R")
```

$R$ diyagramı incelendiğinde; 18 numaralı alt grupların kontrol dışı olduğu gözlenmektedir. Prosesin istatistiksel olarak kontrol altında olmadığı ve varyasyonun özel bir nedeninin olduğu sonucuna varılmaktadır. Bu noktada varyasyona neden olan faktörler incelenerek ortadan kaldırılmalıdır. 

<br>

İlk olarak $R$ diyagramındaki kontrol dışı noktalar analiz edilmektedir. Bu analiz sonucunda 18 numaralı alt gruptaki kontrol dışı noktanın hasarlı yağ hattından kaynaklandığı tespit edilmiştir. 

$\bar{X}$ diyagramı analiz edildiğinde 4 ve 20 numaralı alt gruplardaki kontrol dışı noktaların nedeni belirlenmiştir. 4 numaralı alt grupta oluşan kontrol dışılık, yeni ve geçici çalışan operatörün yanlış ölçümünden ve 20 numaralı alt grupta görülen kontrol dışı noktanın kötü malzemeden kaynaklandığı saptanmıştır. 16 numaralı alt grupta söz konusu olan kontrol dışılığın nedeni işletme tarafından tespit edilememiştir ve rassal nedenlerden dolayı oluşan doğal değişkenliğin bir parçası olduğu varsayılmıştır.

$\bar{X}$ ve $R$ diyagramları incelendikten sonra kontrol limitleri dışında gözlenen özel değişkenlik kaynağı gruplar çıkartılarak limitler tekrar belirlenir.



## Alt Grup Kavramı ve Örneklem Büyüklüğünün Belirlenmesi

X-R kontrol diyagramları ile ilgili örneklerden görülebileceği gibi alt grup örnekleri, zamanın belli bir anında ya da periyodunda üretilen ürün ya da hizmetlerden seçilmektedir. Alt grup içindeki değişkenlik, kontrol limitlerini belirlemede kullanılırken, alt gruplar arasındaki değişkenlik  uzun dönemli kararlılığı değerlendirmede kullanılır.

- Alt grup büyüklüğü arttıkça, kontrol limitleri merkez değerine daha yakın olacak ve proses ortalamasındaki küçük değişkenliklere kontrol diyagramı daha duyarlı hale gelecektir.

- Alt grup büyüklüğü arttıkça, alt grup başına muayene maliyeti artar.

- Tahribat veren test kullanıldığında ve öğe pahalı olduğunda, küçük bir alt grup gerekmektedir.

<br>

Örneklem büyüklüğünün belirlenmesi ile ilgili olarak ASQ tarafından aşağıdaki değerler önerilmiştir.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/ornb.png" style="float: center;" width="400" height="270" title="Örneklem Büyüklüğü" />       

Bu tablo, parti büyüklüklerine bağlı olarak önerilen örneklem büyüklüğü değerlerini sunmaktadır. Eğer bir proses günlük 4000 parça üretiyorsa, 75 toplam muayene önerilir. Bu nedenle alt grup büyüklüğü 4 ile 19 alt grup iyi bir başlangıç noktası olacaktır.

## Kontrol Dışı Olma Durumu

Bir nokta (alt grup değeri) kontrol limitleri dışına düştüğünde, proses kontrol dışındadır. Noktalar $\pm3\sigma$ sınırları içine düştüğünde de, bir proseste kontrol dışılık söz konusu olabilir. Ölçülebilir değişkenler için kullanılan kontrol diyagramlarında aşağıda belirtilen 7 farklı kontrol testi de kullanılabilmektedir. 

- Merkez çizgisinin aynı tarafında yer alan ardıl 9 nokta
- Sürekli artan ya da azalan 6 nokta
- Bir artıp bir azalan 14 nokta
- 3 ardıl noktadan 2'sinin aynı yönde $\pm2\sigma$ aralığının dışında olması
- 5 noktadan 4'ünün aynı yönde $\pm1\sigma$ aralığının dışında olması
- Merkez çizgisinin 1 standart sapma içinde 15 ardıl nokta olması
- Merkez çizgisinin $\pm1\sigma$ aralığının dışında 8 nokta olması

<br>

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/viol.png" style="float: center;" width="600" height="400" title="" />

<br>

Benzer şekilde, ölçüm değerlerinde bir trend, sürekli değişim, tekrarlı çevrimler ya da kümeleme görülmesi durumunda da kontrol dışılık durumundan söz edilmelidir.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/trend.png" style="float: center;" width="550" height="350" title="" />


<br>

Kontrol dışılık durumunun yanlış değerlendirilmesi sonucu istatistiksel kalite kontrolde aşağıdaki gibi iki tip hata oluşacaktır.

- Tip I, Gerçekte olağan bir neden olduğunda, özel bir neden olarak değerlendirme

- Tip II, Gerçekte değişkenliğin özel bir nedeni olduğunda olağan bir neden olarak
değerlendirme



## X-S Kontrol Diyagramları

X-R kontrol diyagramları ölçülebilir değişkenler için en yaygın kullanılan diyagramlar olmalarına rağmen, bazı organizasyonlar alt grup yayılımının ölçüsü olarak örneklem standart sapmasını (s) tercih etmektedir. Bir s diyagramı ile bir R diyagramı karşılaştırıldığında, R diyagramının hesaplamaları ve açıklanması daha kolaydır. Diğer taraftan, R grafiğinde alt grupların en yüksek ve en düşük değerleri kullanılırken, s diyagramında tüm veri kullanılarak alt grup standart sapması hesaplanır. Bu nedenle, bir s diyagramı bir R diyagramından daha doğrudur. Alt grup büyüklüğü küçük olduğunda, her iki kontrol diyagramı grafiksel olarak benzer değişkenliği ortaya koymaktadır. Bununla birlikte, alt grup büyüklüğü 10 veya 12 den daha fazla olduğunda, ekstrem değerler R grafiği üzerinde aşırı etkiye sahip olacaktır. Bu nedenle büyük alt grup durumunda s diyagramı kullanılmalıdır.

X kontrol diyagramları yığın ortalamasındaki değişimi bulmak için tasarlanmıştır. Yığın varyansındaki olası değişimlerin araştırıldığı durumlarda ise S kontrol diyagramı kullanılmaktadır.

<br>

**$X$ kontrol diyagramı** için LCL, CL ve UCL aşağıdaki formüller yardımı ile hesaplanabilir.

$UCL=\bar{\bar{x}}+A_{3}\bar{s}$

$CL=\bar{\bar{x}}$

$LCL=\bar{\bar{x}}-A_{3}\bar{s}$

-------

**Not1:** Teoride $A_{3}$ değeri ve $n$'e bağlı bir katsayı olan $c_{4}$ üzerinden elde edilmektedir.

$A_{3}=3/(c_{4}\sqrt{n})$

--------

<br>

**$S$ kontrol diyagramı** için LCL, CL ve UCL aşağıdaki formüller yardımı ile hesaplanabilir.

$UCL=B_{4}\bar{s}$

$CL=\bar{s}$

$LCL=B_{3}\bar{s}$

----------


**Not2:** Teoride $B_{5}$, $B_{6}$, $B_{3}$ ve $B_{4}$ değerleri aşağıdaki eşitlikler yardımıyla elde edilmektedir.

$B_{5}=c_{4}-3\sqrt{1-c^{2}_{4}}$

$B_{6}=c_{4}+3\sqrt{1-c^{2}_{4}}$

$B_{4}=B_{6}/c_{4}$

$B_{3}=B_{5}/c_{4}$

----------

<br>

Örneklem standart sapmasını hatırlayalım; 

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/se.png" style="float: center;" width="200" height="100" title="" />

<br>

Proses standart sapması için yansız tahmin edici;

$\hat{\sigma}=\bar{s}/c_{4}$

olarak hesaplanır.

<br>

**Örnek 1:** Bir makine parçası üretiminde kama mili derinliği (mm) ile ilgili elde edilen ölçüm sonuçlarını içermektedir. Ölçümler, farklı zamanlarda üretilen 25 partiden 4 örnek alınarak gerçekleştirilmiştir. X-R kontrol diyagramını çizerek, prosesin istatistiksel olarak kontrol altında olup olmadığını analiz ediniz.

```{r echo=FALSE}
library(DT)
alt_gr_no<-1:25

tarih<-c(rep("26 Aralık",5),rep("27 Aralık",5),rep("28 Aralık",5),rep("29 Aralık",5),rep("30 Aralık",5))

zaman<-c("08:50","11:30","01:45","03:45","04:20","08:35","09:00","09:40","01:30","02:50","08:30","01:35","02:25","02:35","03:55","08:25","09:25","11:00","02:35","03:15","09:35","10:20","11:35","02:00","04:25")
  
t1<-c(6.35,6.46,6.34,6.69,6.38,6.42,6.44,6.33,6.48,6.47,6.38,6.37,6.4,6.38,6.5,6.33,6.41,6.38,6.35,6.56,6.38,6.39,6.42,6.43,6.39)
  
t2<-c(6.4,6.37,6.4,6.64,6.34,6.41,6.41,6.41,6.44,6.43,6.41,6.37,6.38,6.39,6.42,6.35,6.4,6.44,6.41,6.55,6.4,6.42,6.39,6.36,6.38)
  
t3<-c(6.32,6.36,6.34,6.68,6.44,6.43,6.41,6.38,6.47,6.36,6.39,6.41,6.47,6.45,6.43,6.29,6.29,6.28,6.37,6.45,6.45,6.35,6.39,6.35,6.43)
  
t4<-c(6.37,6.41,6.36,6.59,6.4,6.34,6.46,6.36,6.45,6.42,6.38,6.37,6.35,6.42,6.45,6.39,6.34,6.58,6.38,6.48,6.37,6.4,6.36,6.38,6.44)
  
data=data.frame(alt_gr_no,tarih,zaman,t1,t2,t3,t4)

DT::datatable(data,options = list(
            columnDefs = list(list(className = 'dt-center', targets = 0:7))
            ))
  
  
```

<br>

**Mil Derinliği $\bar{X}$ Kontrol Diyagramı**

```{r}
qcc(xs, type="xbar")
```


**Mil Derinliği $\bar{S}$ Kontrol Diyagramı** 

```{r message=FALSE, warning=FALSE}
xs<-data[,4:7]
schart<-qcc(xs, type="S")
  
```
```{r}
c4=0.9213
std=schart$center/c4
std
```

<br>

```{r}
newdt<-xs[-c(4,18,20),]

qcc(newdt, type="xbar")
qcc(newdt, type="S")
```
```{r}
fx<-xs[-c(4,9,15,18,20),]    # out 9,15

qcc(fx, type="xbar")
qcc(fx, type="S")
```

**Gözlem sayısı her alt grupta aynı değilse?**

X-R kontrol diyagramlarında alt grup örneklem büyüklükleri (n) aynı olmadığında $\bar{\bar{x}}$ ve $\bar{s}$ hesaplaması aşağıdaki ağırlıklı ortalama yaklaşımı kullanılarak hesaplanır ve ardından kontrol limitleri elde edilir.

<br>

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/weighted.png" style="float: center;" width="600" height="300" title="" />

<br>

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/examp2.png" style="float: center;" width="700" height="600" title="" />

<br>

Alt grup gözlem sayısının farklı olması durumunda proses standart sapması için yansız tahmin edici hesabı da farklılaşmaktadır. n sayısına bağlı olarak hesaplama yapılması gerektiğinden, her bir n sayısı için $\bar{s}$ hesaplanır, ardından ilgili n değerine bağlı $c_{4}$ değeri belirlenir ve 


$\hat{\sigma}=\bar{s}/c_{4}$

hesaplanır, örneğin alt grup büyüklüğü n=3,4 olan bir veri için n=3 ve n=4 için iki defa hesaplama yapılmalıdır.


<br>


```{r}
library(qcc)
library(DT)
data("pistonrings")
head(pistonrings)
diameter = with(pistonrings, qcc.groups(diameter, sample))

DT::datatable(diameter,options = list(
            columnDefs = list(list(className = 'dt-center', targets = 0:5))
            ))

```
<br>

```{r}
out = c(9, 10, 30, 35, 45, 64, 65, 74, 75, 85, 99, 100)
diameter2 = with(pistonrings, qcc.groups(diameter[-out], sample[-out]))

DT::datatable(diameter2,options = list(
            columnDefs = list(list(className = 'dt-center', targets = 0:5))
            ))
```


```{r message=FALSE, warning=FALSE}
summary(qcc(diameter2[1:25,], type="xbar"))

```


```{r message=FALSE, warning=FALSE}
z<-qcc(diameter2[1:25,], type="S");z
z$limits
```
<br>






<!--chapter:end:07-Ölçülebilir-Değişkenler-için-Kontrol-Diyagramları.Rmd-->

# Ölçülemeyen Özellikler için Kontrol Diyagramları

Birçok kalite özelliği sayısal olarak uygun şekilde ifade edilemez. Bu gibi durumlarda, genellikle incelenen her bir öğeyi, o kalite özelliğiyle ilgili spesifikasyonlara uygun veya uygun olmayan olarak sınıflandırılır. Bu tür ölçülemeyen özelliklere örnek olarak bir kredi başvurusu süresince gerçekleşen hata sayısı, bir hastanede gerçekleşen tıbbi hataların sayısı gibi örnekler verilebilir.

Ölçülebilir özellikler için oluşturulan kontrol diyagramları tabi ki daha fazla bilgi içerdiğinden verimlidir. Ancak her üretim tipinde ölçülebilir değerlerin elde edilmesi mümkün olamamaktadır.  Özellikle hizmet endüstrilerinde ve imalat dışı kalite geliştirme çalışmalarında ölçülemeyen özellikler için kontrol diyagramları oldukça faydalıdır çünkü bu ortamlarda bulunan kalite özelliklerinin çoğu sayısal ölçekte kolayca ölçülememektedir.


## p kontrol diyagramı

Bir partideki hatalı ya da **kusurlu oranı** için kullanılan **p kontrol diyagramı**, Binom dağılımını esas almaktadır.

**p kontrol diyagramında**, LCL, CL ve UCL aşağıdaki formüller kullanılarak hesaplanabilir.

$UCL_{p}=\bar{p}+3\sqrt{\frac{\bar{p}(1-\bar{p})}{n}}$

$CL_{p}=\bar{p}$

$LCL_{p}=\bar{p}-3\sqrt{\frac{\bar{p}(1-\bar{p})}{n}}$

<br>

Ölçülemeyen özellikler için kontrol diyagramlarında uygulanacak kontrol dışılık testleri;

- Merkez çizgisinin $\pm3\sigma$ aralığının dışında 1 nokta
- Merkez çizgisinin aynı tarafında yer alan ardıl 9 nokta
- Sürekli artan ya da azalan 6 nokta
- Bir artıp bir azalan 14 nokta

olarak sıralanabilir.

<br>

**Örnek 1:** Büyük bir e-ticaret şirketi, müşterilerinden doğru olmayan faturalarla ilgili şikayetler almaktadır. Altı sigma projesinin ölçüm evresi boyunca bu durumu iyileştirmek amaçlanmış ve20 haftalık zaman dilimi için hatalı faturaları kontrol etmek amacı ile 200 faturalık rassal örnekler alınmıştır. Elde edilen değerler aşağıdaki yer almaktadır.

```{r echo=FALSE}
library(DT)
h.say<-c(23,23,20,21,17,22,24,20,18,17,24,17,15,19,19,22,27,23,23,18)
df<-data.frame(Hatalı_Sayısı=h.say)
DT::datatable(df,options = list(
            columnDefs = list(list(className = 'dt-center', targets = 0:1))
            ))


```

Hatalı sayısı işlem kolaylığı açısından h.say değişkenine atanmıştır.

```{r}
sum(h.say)
```

<br>

p kontrol diyagramı için ilk olarak haftalara ait hata oranlarının hesaplanması gerekmektedir. 20 haftalık zaman dilimi için hatalı faturaların kontrolü amacıyla 200 faturalık rassal örnekler alındığı bilgisi soruda verilmişti.

```{r}
h.or<-c()   # hatalı oranı (p)
for (i in 1:20){
  h.or[i]=h.say[i]/200
}

m.p=mean(h.or)
```
<br>

Bu hesaplamalara göre ortalama  hata oranı $\bar{p}$;

```{r}
412/(200*20)    # % 10.3
```

<br>

```{r echo=FALSE}

df2<-data.frame(Hatalı_Sayısı=h.say, Hatalı_Oranı=h.or)

DT::datatable(df2,options = list(
            columnDefs = list(list(className = 'dt-center', targets = 0:2))
            ))
```

<br>

Hatalı oranı için UCL, CL ve LCL aşağıdaki gibi elde edilir;

```{r}
n=200
UCLp=m.p+3*sqrt(m.p*(1-m.p)/n); UCLp

UCLp<-round(UCLp,4); UCLp

```

<br>

```{r}
CLp=m.p
CLp
```


<br>

```{r}
LCLp=m.p-3*sqrt(m.p*(1-m.p)/n); LCLp

LCLp<-round(LCLp,4); LCLp
```

Kontrol limitleri hesaplandıktan sonra kontrol diyagramı elde edilerek değişkenliğin özel bir nedeninin olup olmadığı kontrol edilmelidir.

```{r message=FALSE, warning=FALSE}
library(qcc)
qcc(h.say, sizes=200, type="p")
```

<br>

Kontrol diyagramı incelendiğinde kontrol limitlerinin dışında gözlenen nokta bulunmamış ve kontrol testleri de herhangi bir özel değişkenlik göstermemiştir. Prosesin istatistiksel olarak kontrol altında ve mevcut değişkenliğin rassal olduğu söylenebilir.

<br>

p kontrol diyagramları örneklem büyüklüğünün sabit olmadığı durumlarda da kullanılabilir.

**Örnek 2:** Bir modem üreticisi, Mart ayının sonu ve Nisan ayının tamamı için ürünlerin son testinden veri toplamıştır. Alt grup büyüklüğü, 1 günlük muayene sonuçlarıdır. 25 alt grup için muayene sonuçları aşağıda yer almaktadır.

Günlük muayene sayısındaki değişkenlik farklı sebeplerden kaynaklanabilir. Makine arızaları, farklı üretim gereksinimlerine sahip ürünler değişkenliğe neden olmaktadır. 1238 muayene ileen düşük değer 9 Nisan tarihine aittir. Bu tarihte ikinci vardiya çalışılmamıştır. 2768 muayene ile 22 Nisan tarihinde en yüksek değer gerçekleşmiştir. Bu değer, fazla mesaiden kaynaklanmıştır.

```{r echo=FALSE, message=FALSE, warning=FALSE}
a.g<-c("29 Mart","30 Mart","31 Mart","1 Nisan","2 Nisan","5 Nisan","6 Nisan","7 Nisan","8 Nisan","9 Nisan","12 Nisan","13 Nisan","14 Nisan","15 Nisan","16 Nisan","19 Nisan","20 Nisan","21 Nisan","22 Nisan","23 Nisan","26 Nisan","27 Nisan","28 Nisan","29 Nisan", "30 Nisan")


muay.s<-c(2385,1451,1935,2450,1997,2168,1941,1962,2244,1238,2289,1464,2061,1667,2350,2354,1509,2190,2678,2252,1641,1782,1993,2382,2132)

kus.say<-c(55,18,50,42,39,52,47,34,29,53,45,26,47,34,31,38,28,30,113,58,34,19,30,17,46)


df3<-data.frame(Alt_Grup=a.g, Muayene_Sayısı=muay.s,Kusurlu_Sayısı=kus.say)
DT::datatable(df3,options = list(
            columnDefs = list(list(className = 'dt-center', targets = 0:3))
            ))

       
       
```

<br>

Öncelikle kontrol diyagramının merkez çizgisini oluşturacak olan ortalama kusurlu oranı ($\bar{p}$) hesaplanmalıdır.

```{r}
# Kusurlu_Sayısı=kus.say
# Muayene_Sayısı=muay.s

pbar=sum(kus.say)/sum(muay.s)
```
<br>

Örneklem büyüklükleri farklılık gösterdiğinden her bir örneklem için kontrol limitlerinin hesaplanması gerekmektedir.

```{r}
UCL.p=c()
LCL.p=c()

for(i in 1:25){
  UCL.p[i]=pbar+3*sqrt(pbar*(1-pbar)/muay.s[i])
  LCL.p[i]=pbar-3*sqrt(pbar*(1-pbar)/muay.s[i])
}

head(cbind(UCL.p,LCL.p))
```

<br>

Her bir alt grup için kusurlu oranı elde edilirse,

```{r}
kus.or=c()  # Kusurlu oranı
for(i in 1:25){
  kus.or[i]=kus.say[i]/muay.s[i]
}

head(kus.or)
```
<br>

```{r echo=FALSE, message=FALSE, warning=FALSE}
df4=data.frame(Alt_Grup=a.g, Muayene_Sayısı=muay.s,Kusurlu_Sayısı=kus.say, Kusurlu_Oranı=round(kus.or,2), UCL= round(UCL.p,3),LCL=round(LCL.p,3))

DT::datatable(df4,options = list(
            columnDefs = list(list(className = 'dt-center', targets = 0:6))
            ))
```


p kontrol diyagramı;

```{r message=FALSE, warning=FALSE}
library(qcc)
qcc(kus.say, sizes=muay.s, type="p")
```
Kontrol diyagramı incelendiğinde prosesin istatistiksel olarak kontrol altında olmadığı görülmektedir. 9, 22 ve 29 Nisan tarihlerindeki ölçümlerin kontrol limitlerini aştığı gözlenmektedir.  Bu üç noktanın da özel değişkenlik sebebi olduğu anlaşıldığından, gözlemlerin elimine edilerek hesaplamaların tekrarlanması gerekmektedir.

```{r}
df5<-df4[-c(10,19,24),]

qcc(df5[,3], sizes=df5[,2], type="p")
```


## np kontrol diyagramı

Ölçülemeyen özellikler için hatalı ya da **kusurlu sayısının** analizinde ve alt grup büyüklükleri eşit olması durumunda **np kontrol diyagramları** kullanılmaktadır. Kontrol limitleri merkez çizgisinden $\pm3\sigma$ uzaklıkta oluşmaktadır.Standart sapma değeri;

$\sigma=\sqrt{n\bar{p}(1-\bar{p})}$

eşitliği ile hesaplanır.

<br>

**np kontrol diyagramında**, LCL, CL ve UCL aşağıdaki formüller kullanılarak hesaplanabilir.

$UCL_{np}=n\bar{p}+3\sqrt{n\bar{p}(1-\bar{p})}$

$CL_{np}=n\bar{p}$

$LCL_{np}=n\bar{p}-3\sqrt{n\bar{p}(1-\bar{p})}$

<br>

Ölçülemeyen özellikler için kontrol diyagramlarında uygulanacak kontrol dışılık testleri p kontrol diyagramlarında olduğu gibi bu yöntem için de incelenmelidir.

<br>

**Örnek 1:** Bir analist bir üretim vardiyasında her biri 200 üründen oluşan 10 farklı örneklem almış ve her bir örneklemdeki hatalı parça sayısını belirleyerek kaydetmiştir. Hata sayıları aşağıdaki tabloda yer almaktadır. Kontrol limitlerini elde ederek np kontrol diyagramını oluşturunuz.

```{r}
hata=c(5,3,7,2,1,4,10,4,1,6)
cat("hata:",hata)
```
<br>

```{r}
pbar=sum(hata)/(10*200); pbar
```
<br>

```{r}
n=200
n.pbar=n*pbar
n.pbar
```

<br>

Kontrol limitlerinin hesabında gerekecek temel değerler olan $\bar{p}$ ve $n\bar{p}$ elde edildikten sonra kontrol limitleri hesabına geçilir.

```{r}
UCLnp=n.pbar+3*sqrt(n.pbar*(1-pbar))
UCLnp
```

<br>

```{r}
CLnp=n.pbar
CLnp
```

<br>

```{r}
LCLnp=n.pbar-3*sqrt(n.pbar*(1-pbar))
LCLnp
```

Burada önemli nokta hata sayısının negatif olma ihtimalinin bulunmamasıdır. Bu bakımdan negatif hesaplanan LCL değeri 0 olarak alınır. Belirlenen limit değerleri ışığında kontrol diyagramı aşağıdaki gibi oluşur;

```{r}
library(qcc)
qcc(hata, sizes=200, type="np")
```

Kontrol diyagram çıktısında elde edilen StdDev değerinin kontrolü de aşağıdaki şekilde yapılabilir;

```{r}
sigma=sqrt(n.pbar*(1-pbar))
sigma
```


np kontrol diyagramında görüldüğü üzere kontrol limitlerini aşan gözlem bulunmamakta ve kontrol dışılık testinde değişkenlik gösteren gözlem bulunmamaktadır, proses kontrol altındadır ve elde edilen limitler evre II için kullanılabilir.



## c kontrol diyagramı

c kontrol diyagramı eşit fırsattaki kusur sayısını kontrol etmek için kullanılır. Örneklem büyüklüğü sabittir. Bu eşit fırsat alanı; zaman alan ya da ürün grubu olabilir. Örneğin; bir saatteki iplik kırılmalarının sayısı, bir metrekare halıdaki kusur sayısı. 

**c kontrol diyagramında**, LCL, CL ve UCL aşağıdaki formüller kullanılarak hesaplanabilir.

$UCL_{c}=\bar{c}+3\sqrt{\bar{c}}$

$CL_{c}=\bar{c}$

$LCL_{c}=\bar{c}-3\sqrt{\bar{c}}$

<br>

burada $\bar{c}$ ortalama kusur sayısıdır.

**Örnek 1:** Bir banka tarafından gerçekleştirilen ATM cihazlarının tahkiki sırasında, ATM cihazı bazlı olarak 1 aylık döneme ait tespit edilen hata sayıları aşağıdaki tablodaki gibidir. Kontrol limitlerini hesaplayınız, kontrol diyagramını oluşturunuz.

```{r echo=FALSE}
atm<-1:30
hata.say<-c(5,4,7,9,4,6,5,8,9,11,5,10,6,6,5,4,7,10,6,9,8,8,4,8,8,4,4,7,3,12)

dt<- data.frame(atm,hata.say)
DT::datatable(dt,options = list(
            columnDefs = list(list(className = 'dt-center', targets = 0:2))
            ))
```

<br>

Ortalama hata sayısı;

```{r}
mc<-mean(hata.say)
mc
```

<br>

```{r}
UCLc=mc+3*sqrt(mc)
UCLc
```

<br>

```{r}
CLc=mc
```

<br>

```{r}
LCLc=mc-3*sqrt(mc)
LCLc
```
Hata sayısı değeri negatif olamayacağından LCL değeri 0 olarak alınır. Elde edilen kontrol limitlerine bağlı olarak c kontrol diyagramı aşağıdaki gibi çizilir.

```{r}
qcc(hata.say,30, type="c")
```

Kontrol diyagramı incelendiğinde, kontrol dışı bir noktanın olmadığı ve prosesin istatistiksel olarak kontrol altında olduğu görülmektedir. 

## u kontrol diyagramı

Ölçülemeyen niteliklerde ölçüm birimi başına hata sayısını kontrol etmek için u kontrol diyagramından faydalanılabilir. Örneklem büyüklüğü değişken ya da sabit olabilir. 

**u kontrol diyagramında**, LCL, CL ve UCL aşağıdaki formüller kullanılarak hesaplanabilir.

$UCL_{u}=\bar{u}+3\sqrt{\frac{\bar{u}}{n}}$

$CL_{u}=\bar{u}$

$LCL_{u}=\bar{u}-3\sqrt{\frac{\bar{u}}{n}}$

<br>

burada $\bar{u}$ ortalama kusur sayısıdır.


**Örnek 1:** Bir analist, her bir vardiyadaki kontrplak levhaların üretimini incelemekte ve üretilen kontrplak levhaların sayısını ve her bir levhadaki hata sayısını kayıt altına almaktadır. Muayene birimi, bir kontrplak levhadır. Analist tarafından toplanan veri, aşağıdaki tabloda yer almaktadır. u kontrol diyagramını oluşturunuz.

```{r echo=FALSE}
var<-c("A","B","C","D")
kont<-c(250,270,230,245)
top.hat<-c(300,310,290,310)
kont2<-c(1.200,1.148,1.261,1.265)

df<-data.frame(var,kont,top.hat,kont2)
names(df)<-c("Vardiya", "Kontrplak sayısı", "Toplam hata sayısı", "Kontrplak başına hata sayısı")

DT::datatable(df,options = list(
            columnDefs = list(list(className = 'dt-center', targets = 0:4))
            ))
```

<br>

Sabit olmayan örneklem büyüklüklerinde her bir alt grup için kontrol limiti bulunduğunu daha önceki konu başlarında görmüştük, burada da her bir alt grup için ilgili büyüklüğe (n) bağlı olarak gerekli hesaplamalar yapılacaktır. Soruda yer alan değişkenler kodlamada aşağıdaki değişken isimleri ile adlandırılmıştır.

Kontrplak sayısı; kont

Toplam hata sayısı; top.hat

Kontrplak başına hata sayısı; kont2

**Vardiya A**

```{r}
ubar=sum(top.hat)/sum(kont) ; ubar

UCLu1=ubar+3*sqrt(ubar/kont[1])     # n=250 (kontrplak sayisi)
UCLu1
```

<br>

```{r}
CLu1=ubar
CLu1
```

<br>

```{r}
LCLu1=ubar-3*sqrt(ubar/kont[1])
LCLu1
```

**Vardiya B**

```{r}
UCLu2=ubar+3*sqrt(ubar/kont[2])     # n=250 (kontrplak sayisi)
UCLu2
```

<br>

```{r}
CLu2=ubar
CLu2
```

<br>

```{r}
LCLu2=ubar-3*sqrt(ubar/kont[2])
LCLu2
```


C ve D vardiyaları da benzer şekilde hesaplanabilir veya vardiyaların tamamı tek bir döngüde yazılarak elde edilebilir.

```{r}
limits=matrix(NA,4,2)
for (i in 1:4){
  limits[i,1]=ubar-3*sqrt(ubar/kont[i])
  limits[i,2]=ubar+3*sqrt(ubar/kont[i])}
  colnames(limits)<-c("LCL","UCL")
  round(limits,3)

```

Elde edilen kontrol limitleri için u kontrol diyagramı;

```{r}
qcc(top.hat,sizes=kont, type="u")
```
Kontrol diyagramı incelendiğinde, üretim vardiyaları için kontrol dışılığın söz konusu olmadığı görülmektedir. 

<!--chapter:end:08-Ölçülemeyen-Özellikler-için-Kontrol-Diyagramları.Rmd-->

# Proses Yeterlilik Analizi 

## Neden PCA

Proses yeterlilik analizi (Process Capability Analysis(PCA)) uygulanmasının nedenleri aşağıdaki gibi sıralanabilir.

- Prosesin spesifikasyonları karşılama durumunun değerlendirilmesi
- Değişkenliğin azaltılmasında sürekliliği sağlamak
- Prosesteki sürekli iyileşmenin takibi
- Ürünlerin özdeşliğinin araştırılması
- İyileştirilmesi gereken proses veya kalite karakteristiğinin belirlenmesi
- Müşterinin sesini duyarak gereksinimlerin karşılanma durumunu incelemek
- Tedarikçi, makine veya proses seçimine karar verilmesi

<br>

Proses yeterlilik analizinden elde edilen veriler aşağıdaki amaçlar için kullanılabilir;

- Prosesin toleransları karşılama miktarının öngörülmesi
- Sorumlu kişileri proses seçimi ve modifikasyonu konularında yönlendirmesi
- Örneklem alma sıklığının belirlenmesi
- Tedarikçi seçimi
- Proses değişkenliğinin azaltılması

Bu bakımdan kullanılabilecek üç temel yöntem;

- Histogramlar veya olasılık grafikleri
- Kontrol diyagramları
- Deney tasarımı

## Histogramlar veya olasılık grafikleri

Histogramın güvenilir bir PCA aracı olabilmesi için en az 100 ve üzeri gözleme ihtiyaç duyulmaktadır.

**Örnek1:** 100 adet cam şişenin patlama gücüne ait değerler burst.st değişkeninde yer almaktadır. Prosesin yeterliliği hakkında ne söylenebilir?

```{r echo=FALSE}
burst.st<-c(265,205,263,307,220,268,260,234,299,215,197,286,274,243,231,267,281,265,214,318,346,317,242,258,276,300,208,187,264,271,280,242,260,321,228,250,299,258,267,293,265,254,281,294,223,260,308,235,283,277,200,235,246,328,296,276,264,269,235,290,221,176,248,263,231,334,280,265,272,283,265,262,271,245,301,280,274,253,287,258,261,248,260,274,337,250,278,254,274,275,278,250,265,270,298,257,210,280,269,251)

DT::datatable(as.data.frame(burst.st),options = list(
            columnDefs = list(list(className = 'dt-center', targets = 0:1))
            ))
```

```{r}
m=mean(burst.st)
s=sd(burst.st)

m-3*s
m+3*s

hist(burst.st)
```
Histogram incelendiğinde patlama gücü değişkeninin yaklaşık olarak normal dağıldığı söylenebilir. Böylece, bu proseste üretilen şişelerin yaklaşık %99.73'ünün 168 ile 360 (psi) arasında olacağını tahmin edebiliriz. Burada proses yeterliliğinin spesifikasyonlardan bağımsız ölçüldüğünü unutmayınız. 

<br>

Olasılık grafikleri histogramlara alternatif olmakla birlikte daha az gözlemle çalışabilmesi açısından avantajlıdır. Çizilen grafiğe bağlı olarak dağılım belirlenir ve buna bağlı olarak yorumlama yapılır. Olasılık grafikleri subjektif olduğundan dağılımın uyum iyiliği testleri ile teyit edilmesi önerilir.


## Proses Yeterliliği ve Sigma Kalite Seviyesi

Yeterlilik indeksleri, müşteri gereksinimleri ile ilişkili şekilde proseslerin ne kadar iyi performans gösterdiklerinin değerlendirilmesinde yaygın şekilde kullanılmaktadır. Prosesin müşteri ihtiyaçlarına göre belirlenmiş spesifikasyon limitlerine göre değerlendirilmesi yeterlilik indeksleri ile gerçekleştirilir. Bu bakımdan sigma kalite seviyesi prosesin değerlendirilmesinde tek başına yeterli değildir.

Hedef değerin 490 gr. ve spesifikasyon limitlerinin 485-495 gr. arasında olması gerektiğini belirten bir müşteri için aynı tip şişe üreten 4 proses olduğunu varsayalım. Prosesten alınan düzenli örnekler ile kontrol diyagramları oluşturulduğunda prosesin kontrol altında olduğunu varsayalım. Proseslerin ortalamaları ve standart sapmaları aşağıdaki gibidir:

<br>

|Üretim Hattı | Ortalama | Standart Sapma |
|:-----:|:----:|:----:|
| Hat 1 | 490 | 1.5 |
| Hat 2 | 492 | 1.5 | 
| Hat 3 | 490 | 3 |
| Hat 4 | 487 | 0.9 |

<br>

Üretim hatlarının milyonda hata sayıları ve sigma kalite seviyeleri verilen ortalama, standart sapma ve spesifikasyon limiti değerlerine göre normal dağılım tablosu kullanılarak hesaplanabilir. Tüm üretim hatları için **spesifikasyon dışı ürün üretme olasılıkları;** alt spesifikasyon limiti olan 485 gr. dan daha düşük ve üst spesifikasyon limiti olan 495 gr. dan daha büyük parça üretme olasılıklarının toplamına eşittir. Hesaplama sonucu elde edilen değerler;

<br>


|Üretim Hattı | Ortalama | Standart Sapma | ppm | Sigma Seviyesi|
|:-----:|:----:|:----:|:----:|:------:|
| Hat 1 | 490 | 1.5 | 858| 4.64 |
| Hat 2 | 492 | 1.5 | 22752| 3.50 | 
| Hat 3 | 490 | 3 | 95580| 2.81 |
| Hat 4 | 487 | 0.9 | 13134 | 3.72 |

<br>

Sigma kalite seviyesi, proses performansını tek bir değerde özetlemektedir. Yalnızca sigma kalite seviyesini kullananrak bir prosesin değerlendirilmesi tehlikelidir. Yalnızca sigma kalite seviyesine güvenme, verilen örnekteki Hat 4'ün yüksek potansiyelli performansını görmemizi engellemektedir. Proses yeterlilik endeksleri, sigma kalite seviyesi gibi müşteri gereksinimlerine göre proses performansını tek bir değerde özetlemektedir. Proses yeterlilik indeksleri, prosesin sesinin müşterinin sesi ile uyumunu göstermektedir.


## $C_{p}$, $C_{pk}$ ve $C_{pm}$ Proses Yeterlilik İndeksleri

### $C_{p}$ Proses Yeterlilik Indeksi

Proses yeterlilik için kullanılan en basit indeks olan $C_{p}$, müşteri tolerans aralığının doğal tolerans aralığına oranı olarak tanımlanır ve şu şekilde hesaplanır;



$\hat{C_{p}}=\frac{Müşteri \ toleransı}{Doğal \ tolerans}=\frac{USL-LSL}{6 \hat{\sigma}}$

Verilen eşitlik üzerinden tüm hatlar için $C_{p}$ değeri hesaplanacak olursa;

```{r}
USL=495
LSL=485

d=USL-LSL

Cp1=d/(6*1.5)     # paranteze dikkat!
Cp2=d/(6*1.5)
Cp3=d/(6*3)
Cp4=d/(6*0.9)

cp=c(Cp1,Cp2,Cp3,Cp4)
names(cp)<-c("Cp1","Cp2","Cp3","Cp4")

round(cp,2)
```

Her bir hat için $C_{p}$ değerleri incelendiğinde Hat 1 ve Hat 2'nin farklı milyonda kusur sayıları ve sigma kalite seviyelerine rağmen, aynı proses yeterlilik indeksine sahip olduğu görülmüştür. Bunun nedeni; $C_{p}$ indeksinin prosesin merkezi konumunu dikkate almamasıdır (Hat 2'nin ortalaması hedef değerde değildir). Bu noktada prosesin hem merkezi konumunu hem de yayılımını dikkate alan bir indekse ihtiyaç duyulmuş ve $C_{pk}$ indeksi önerilmiştir.  

<br>

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/cp.png" style="float: right;" width="300" height="400" title="" />

$C_{p}$ indeksinin yorumlanması bakımından aşağıdaki görsel oldukça faydalıdır. Doğal tolerans limitlerinin spesifikasyon limitlerini kapsaması, sürecin spesifikasyonları sağlaması anlamına geldiğinden ideal durumdur. Bu durum $C_{p}>1$ olması anlamına gelmektedir. 

<br>

Doğal tolerans limitleri ve spesifikasyon limitlerinin eşit olması (çakışması) durumu istenen durum olarak adlandırılabilir, bu durum $C_{p}=1$ olması anlamına gelmektedir.

<br>

Spesifikasyon limitlerinin doğal tolerans limitlerini kapsaması ise kusurlu ürün üretimi anlamına geldiğinden istenmeyen durum olarak adlandırılır. Bu durum $C_{p}<1$ anlamına gelmektedir.

<br>

### $C_{pk}$ Proses Yeterlilik Indeksi

Prosesin hem merkezi konumunu hem de yayılımını dikkate alan $C_{pk}$ indeksi, aşağıdaki şekilde hesaplanmaktadır.

$\hat{C}_{pk}=min[\hat{C}_{palt},\hat{C}_{püst}]=min[\frac{\hat{\mu}-LSL}{3\hat{\sigma}},\frac{USL-\hat{\mu}}{3\hat{\sigma}}]$

Hat 2 için $C_{pk}$ proses yeterlilik indeksi hesaplanırsa;

```{r}
Calt=(492-485)/(3*1.5); Calt
Cust=(495-492)/(3*1.5); Cust

min(Calt,Cust)

```

Diğer hatlar için de benzer hesaplamalar yapılarak aşağıdaki tablo oluşturulmuştur.

<br>

|Üretim Hattı | Ortalama | Standart Sapma | ppm | Sigma Seviyesi| $C_{p}$ | $C_{pk}$ |
|:-----:|:----:|:----:|:----:|:------:|:---:|:----:|
| Hat 1 | 490 | 1.5 | 858| 4.64 |1.11 | 1.11|
| Hat 2 | 492 | 1.5 | 22752| 3.50 | 1.11 | 0.67|
| Hat 3 | 490 | 3 | 95580| 2.81 | 0.56 | 0.56|
| Hat 4 | 487 | 0.9 | 13134 | 3.72 | 1.85 | 0.74|

Hedef değer (bu problem için 490 gr.), LSL ve USL'nin tam ortasında ve proses ortalaması hedef değere eşit olduğunda $C_{p}=C_{pk}$   olur ve proses merkezileşmiştir. $C_{p}$ ve  $C_{pk}$ için aşağıdaki çıkarımlar yapılabilir;

- $C_{p}=C_{pk}$ ise proses merkezidir.

- $C_{pk}$ değeri, $C_{p}$ değerinden her zaman küçük ya da eşittir. 

- $C_{p}<1$ ise, proses yeterli değildir.

- $C_{pk}<1$ ise, proses spesifikasyonlara uygun parça üretmemektedir.

- Proses merkezi değiştiğinde, $C_{p}$ değeri değişmeyecektir.

- $C_{pk}=0$ ise, ortalama spesifikasyon limitlerine eşittir.

- Negatif $C_{pk}$ değeri ortalamanın spesifikasyon limitlerinin dışında olduğunu göstermektedir.

- $C_{pk}>1$ ise, proses spesifikasyonlara uygun ürün üretmektedir.

<br>

Proses yeterliliği açısından $C_{p}$ ve  $C_{pk}$ değerleri için belirlenen minimum değerler, aşağıdaki tabloda yer almaktadır. Bu değerler, prosesin tek yönlü (sadece alt ya da sadece üst spesifikasyon limiti) ya da çift yönlü spesifikasyon limiti kullanmasına bağlı olarak farklılık göstermektedir.

|Proses tipi| İki yönlü | Tek yönlü |
|:-----|:----:|:----:|
| Mevcut proses | 1.33 | 1.25 |
| Yeni proses | 1.50  |  1.45| 
| Güvenlik, kuvvet veya kritik parametreler (mevcut) | 1.50| 1.45  |
| Güvenlik, kuvvet veya kritik parametreler (yeni) | 1.67 | 1.60 |

<br>

Merkezileşmiş bir proseste $C_{p}$ ve  $C_{pk}$ indeksleri ile milyon fırsattaki hata sayısı ve sigma kalite seviyesi arasındaki ilişki aşağıdaki tabloda sunulmaktadır.

|$C_{p}$ | $C_{pk}$ | ppm | Sigma Seviyesi |
|:-----|:----:|:----:|:---:|:-----:|
|0.50|0.50|133614|1.5|
|0.60|0.60|71861|1.8|
|0.70|0.70|35729|2.1|
|0.80|0.80|16395|2.4|
|0.90|0.90|6934|2.7|
|1.00|1.00|2700|3.0|
|1.10|1.10|967|3.3|
|1.20|1.20|318|3.6|
|1.30|1.30|96|3.9|
|1.40|1.40|27|4.2|
|1.50|1.50|6.8|4.5|
|1.60|1.60|1.6|4.8|
|1.70|1.70|0.34|5.1|
|1.80|1.80|0.067|5.4|
|1.90|1.90|0.012|5.7|
|2.00|2.00|0.002|6.0|

<br>

$C_{p}$ ve $C_{pk}$ değerlerini yorumlayalım.

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/cpcpk.png" style="float: center;" width="600" height="700" title="" />

### $C_{pm}$ Proses Yeterlilik Indeksi

$C_{p}$ ve $C_{pk}$ indeksleri prosesin hedef değere göre konumunu değerlendirmemektedir. $C_{pk}$, iki yönlü spesifikasyon limiti söz konusu olduğunda, alt ve üst spesifikasyon limitine göre proses ortalamasının konumu ile ilgili herhangi bir ölçüm yapmamaktadır. Bu noktada; $C_{pm}$ indeksi önerilmiştir ve aşağıdaki eşitlik yardımı ile hesaplanmaktadır.

$C_{pm}=\frac{USL-LSL}{6\sqrt{\sigma^2+(\mu-T)^2}}$

-----

Proses yeterlilik indekslerinin hesaplanması için probleme bağlı olarak 

$\hat{\sigma}=\frac{\bar{s}}{c_{4}}$  veya $\hat{\sigma}=\frac{\bar{R}}{d_{2}}$

kullanılır.


**Örnek:** Bir vardiyada üretilen ürünlerden, örnek büyüklüğü 5 olacak şekilde 10 alt grup alınarak tartılmış ve gram olarak ağırlıkları aşağıdaki tablodaki gibi kaydedilmiştir. Başlangıçta; üst spesifikasyon limiti 26 gr. ve alt spesifikasyon limiti 23 gr. olarak belirlenmiştir. Bu verilere göre, prosesin yeterlilik indekslerini hesaplayarak analiz ediniz.

```{r echo=FALSE}
alt.gr<-1:10
x1<-c(24.7,24.8,25.5,24.5,25,25.3,24.9,25.5,25.2,24.8)
x2<-c(25.1,24.9,25.7,24.9,25.3,25.8,24.6,25.9,25.4,25.7)
x3<-c(25.8,25,25.4,25.2,25.6,24.9,24.8,25.1,25.7,25.4)
x4<-c(25.9,25.3,25.6,25.7,24.7,24.8,25.3,25.3,25.6,25.3)
x5<-c(25.2,25.7,25.1,25.8,24.4,25,25.8,25.6,25.1,25)

df<-data.frame(alt.gr,x1,x2,x3,x4,x5)

DT::datatable(df,options = list(
            columnDefs = list(list(className = 'dt-center', targets = 0:6))
            ))

```

<br>

```{r}
USL=26
LSL=23
d2=2.326     # n=5


# Range icin

R<-c()
for (i in 1:nrow(df)){
R[i]<-max(df[,-1][i,])-min(df[,-1][i,])}
R
mr<-mean(R); mr

sgm<-mr/d2
sgm
```

<br>

```{r}
Cp1=(USL-LSL)/(6*sgm)
Cp1
```

<br>

```{r}
# S icin
c4= 0.94    #n=5

s<-c()
for (i in 1:nrow(df)){
s[i]<-sd(df[,-1][i,])}
s
sb<-mean(s);sb

sgm2<-sb/c4;sgm2
```

<br>

```{r}
Cp2=(USL-LSL)/(6*sgm2)
Cp2
```





```{r}
a<-qcc::qcc(df[,-1],type="R")
b<-qcc::qcc(df[,-1],type="xbar")
```


```{r}
qcc::process.capability(b, spec.limits=c(23,26))
```
















<!--chapter:end:09-Proses-Yeterlilik-Analizi.Rmd-->

# Diğer Kontrol Diyagramları

## CUSUM (Cumulative Sum) Kontrol Diyagramı




## EWMA (Exponentially Weighted Moving Average) Kontrol Diyagramı


<!--chapter:end:10-Diğer-Kontrol-Diyagramları.Rmd-->

# Örnekleme

<!--chapter:end:11-Örnekleme.Rmd-->

# Ekler

**Relative range:** $W=\frac{R}{\sigma}$,    $E(W)=d_{2}$



**Unbiased estimator of $\sigma$ of a normal dist.:** 

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/shat.png" style="float:center;" width=900" height="100" title="" />

- $n\geq10$, the range loss efficiency rapidly

- $n\leq6$\ works very well



## Ölçülebilir Değişkenler için Kontrol Grafiği Faktör Tablosu

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/Ek1.png" style="float:center;" width=900" height="600" title="" /> 


## Standart Normal Dağılım Tablosu

<img src="/Users/busenursarica/Documents/GitHub/quality-control/images/ztable.png" style="float:center;" width=800" height="1000" title="Z Tablosu" /> 


<!--chapter:end:12-Ekler.Rmd-->

# Kısaltmalar

```{r , echo=FALSE, results='asis'}
  cat('

  | Kısaltma    | İngilizce  | Türkçe      |
  |:------------|:-----------|:------------|
  | ASQ| American Society for Quality | Amerikan Kalite Derneği |
  | CUSUM| Cumulative Sum | Kümülatif Toplam |
  | EFQM| European Foundation for Quality Management | Avrupa Kalite Yönetimi Vakfı |
  | EWMA| Exponentially Weighted Moving Average | Üstel Ağırlıklı Hareketli Ortalama |
  | ISO| International Organization for Standardization | Uluslararası Standartlar Teşkilatı |
  | MBNQA| Malcolm Baldrige National Quality Award | Malcolm Baldrige Ulusal Kalite Ödülü |
  | PPI| Pareto Priority Index | Pareto Öncelik İndeksi|
  | SPC| Statistical Process Control| İstatistiksel Proses Kontrol|
  | SQC| Statistical Quality Control | İstatistiksel Kalite Kontrol|
  | TQM| Total Quality Management | Toplam Kalite Yönetimi|
')

```



<!--chapter:end:13-Kısaltmalar.Rmd-->

